!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tone=e():t.Tone=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){!function(t,e,n,o){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var r=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},i=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},s=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},u=function(t,e,n){var o=n.startTime,r=n.target,i=n.timeConstant;return r+(e-r)*Math.exp((o-t)/i)},c=function(t){return"exponentialRampToValue"===t.type},l=function(t){return"linearRampToValue"===t.type},p=function(t){return c(t)||l(t)},h=function(t){return"setValue"===t.type},f=function(t){return"setValueCurve"===t.type},d=function t(e,n,o,r){var i=e[n];return void 0===i?r:p(i)||h(i)?i.value:f(i)?i.values[i.values.length-1]:u(o,t(e,n-1,i.startTime,r),i)},_=function(t,e,n,o,r){return void 0===n?[o.insertTime,r]:p(n)?[n.endTime,n.value]:h(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,d(t,e-1,n.startTime,r)]},y=function(t){return"cancelAndHold"===t.type},m=function(t){return"cancelScheduledValues"===t.type},v=function(t){return y(t)||m(t)?t.cancelTime:c(t)||l(t)?t.endTime:t.startTime},g=function(t,e,n,o){var r=o.endTime,i=o.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(t-e)/(r-e)):0},b=function(t,e,n,o){return n+(t-e)/(o.endTime-e)*(o.value-n)},w=function(t,e){var n=e.duration,o=e.startTime,r=e.values;return function(t,e){var n=Math.floor(e),o=Math.ceil(e);return n===o?t[n]:(1-(e-n))*t[n]+(1-(o-e))*t[o]}(r,(t-o)/n*(r.length-1))},O=function(t){return"setTarget"===t.type},x=function(){function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return o(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=v(t);if(y(t)||m(t)){var n=this._automationEvents.findIndex(function(t){return v(t)>=e}),o=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),y(t)){var u=this._automationEvents[this._automationEvents.length-1];if(void 0!==o&&p(o)){if(O(u))throw new Error("The internal list is malformed.");var h=f(u)?u.startTime+u.duration:v(u),d=f(u)?u.values[u.values.length-1]:u.value,_=c(o)?g(e,h,d,o):b(e,h,d,o),w=c(o)?r(_,e,this._currenTime):i(_,e,this._currenTime);this._automationEvents.push(w)}void 0!==u&&O(u)&&this._automationEvents.push(s(this.getValue(e),e)),void 0!==u&&f(u)&&u.startTime+u.duration>e&&(this._automationEvents[this._automationEvents.length-1]=a(new Float32Array([6,7]),u.startTime,e-u.startTime))}}else{var x=this._automationEvents.findIndex(function(t){return v(t)>e}),T=-1===x?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[x-1];if(void 0!==T&&f(T)&&v(T)+T.duration>e)return!1;var C=c(t)?r(t.value,t.endTime,this._currenTime):l(t)?i(t.value,e,this._currenTime):t;if(-1===x)this._automationEvents.push(C);else{if(f(t)&&e+t.duration>v(this._automationEvents[x]))return!1;this._automationEvents.splice(x,0,C)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return v(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),o=n[0];O(o)&&n.unshift(s(d(this._automationEvents,e-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents[this._automationEvents.length-1],o=this._automationEvents.findIndex(function(e){return v(e)>t}),r=this._automationEvents[o],i=v(n)<=t?n:this._automationEvents[o-1];if(void 0!==i&&O(i)&&(void 0===r||!p(r)||r.insertTime>t))return u(t,d(this._automationEvents,o-2,i.startTime,this._defaultValue),i);if(void 0!==i&&h(i)&&(void 0===r||!p(r)))return i.value;if(void 0!==i&&f(i)&&(void 0===r||!p(r)||i.startTime+i.duration>t))return t<i.startTime+i.duration?w(t,i):i.values[i.values.length-1];if(void 0!==i&&p(i)&&(void 0===r||!p(r)))return i.value;if(void 0!==r&&c(r)){var s=_(this._automationEvents,o-1,i,r,this._defaultValue),a=e(s,2),y=a[0],m=a[1];return g(t,y,m,r)}if(void 0!==r&&l(r)){var x=_(this._automationEvents,o-1,i,r,this._defaultValue),T=e(x,2),C=T[0],A=T[1];return b(t,C,A,r)}return this._defaultValue}}]),t}();t.AutomationEventList=x,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=s,t.createSetValueCurveAutomationEvent=a,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2),n(6),n(7))},function(t,e){},function(t,e,n){var o=n(3),r=n(4),i=n(5);t.exports=function(t,e){return o(t)||r(t,e)||i()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}},function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"assert",function(){return Yn}),n.d(o,"setLogger",function(){return Hn}),n.d(o,"log",function(){return $n}),n.d(o,"warn",function(){return Jn});var r=n(0);const i=()=>{try{return new DOMException("","AbortError")}catch(t){return t.code=20,t.name="AbortError",t}},s=new WeakSet,a=new WeakSet,u=new WeakMap,c=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,_=new WeakSet,y=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakSet,b=new WeakMap,w=()=>{try{return new DOMException("","InvalidStateError")}catch(t){return t.code=11,t.name="InvalidStateError",t}},O=t=>{const e=d.get(t);if(void 0===e)throw w();return e},x={construct:()=>x},T=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,C=(t,e)=>{const n=[];let o=t.replace(/^[\s]+/,""),r=o.match(T);for(;null!==r;){const t=r[1].slice(1,-1),i=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(i),r=(o=o.slice(r[0].length).replace(/^[\s]+/,"")).match(T)}return[n.join(";"),o]},A=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},S=t=>{if(!(t=>{try{new new Proxy(t,x)}catch(t){return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.");if("function"!=typeof t.prototype.process)throw new TypeError("The given value for processorCtor should have a callable process() function.")},k={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},P=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},E=t=>P(u,t),j=(t,e)=>t.context===e;function M(t){return P(c,t)}const D=t=>{const e=M(t.context);return P(e.nodes,t)},I=t=>{const e=D(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},R=(t,e,n)=>{const o=D(t);return Promise.all(o.activeInputs.map((t,o)=>Array.from(t).map(([t,r])=>I(t).render(t,e).then(t=>t.connect(n,r,o)))).reduce((t,e)=>[...t,...e],[]))},V=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},N=t=>{const e=new Float32Array(2);try{t.copyFromChannel(e,0,t.length-1)}catch(t){return!1}return!0},q=()=>{try{return new DOMException("","IndexSizeError")}catch(t){return t.code=1,t.name="IndexSizeError",t}},F=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw q();throw t}})(t.getChannelData)},L={numberOfChannels:1},B=t=>P(y,t),W=(t,e)=>{if("active"===e){if(s.has(t))throw new Error("The AudioNode is already stored.");s.add(t)}else{if(!s.has(t))throw new Error("The AudioNode is not stored.");s.delete(t)}B(t).forEach(t=>t(e))},z=(t,e)=>"function"==typeof e?n=>{const o={value:t};return Object.defineProperties(n,{currentTarget:o,target:o}),e.call(t,n)}:e,U={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},G=t=>P(l,t);function Q(t,e){const n=M(t);return P(n.params,e)}const X=(t,e,n,o)=>{const r=Q(t,e);return Promise.all(Array.from(r.activeInputs).map(([t,e])=>I(t).render(t,n).then(t=>t.connect(o,e))))},Y=(t,e,n,o=G(n))=>X(t,n,e,o);const Z=(t,e,n,o)=>{return function(t,e){const n=Q(t,e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}(t,n).replay(o),X(t,n,e,o)},H=t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t);class ${constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){let o=this._listeners.get(e);return void 0===o&&(o=z(this,e),"function"==typeof e&&this._listeners.set(e,o)),this._nativeEventTarget.addEventListener(t,o,n)}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const o=this._listeners.get(e);return this._nativeEventTarget.removeEventListener(t,void 0===o?null:o,n)}}const J=t=>"context"in t,K=t=>J(t[0]),tt=t=>"port"in t,et=(t,e,n,o)=>{const r=e.inputs;return void 0!==r?(t.connect(r[o],n,0),[r[o],n,0]):(t.connect(e,n,o),[e,n,o])},nt=(t,e)=>{if(!B(t).delete(e))throw new Error("Missing the expected event listener")},ot=(t,e,n,o)=>{const r=e.inputs;void 0===o||void 0===n?t.disconnect(e):void 0!==r?t.disconnect(r[o],n,0):t.disconnect(e,n,o)},rt=(t,e,n,o)=>{for(const e of t)if(n(e)){if(o)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},it=t=>s.has(t),st=t=>!s.has(t),at=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[o]=n;return t.delete(o),o},ut=(t,e)=>{!tt(t)&&e.every(t=>0===t.size)&&W(t,"passive")},ct=t=>new Promise(e=>{const n=t.createScriptProcessor(256,1,1),o=t.createGain(),r=t.createBuffer(1,2,44100),i=r.getChannelData(0);i[0]=1,i[1]=1;const s=t.createBufferSource();s.buffer=r,s.loop=!0,s.connect(n),n.connect(t.destination),s.connect(o),s.disconnect(o),n.onaudioprocess=o=>{const r=o.inputBuffer.getChannelData(0);Array.prototype.some.call(r,t=>1===t)?e(!0):e(!1),s.stop(),n.onaudioprocess=null,s.disconnect(n),n.disconnect(t.destination)},s.start()}),lt=t=>"context"in t,pt=(t,e,[n,o,r],i)=>{rt(t[o],[e,n,r],t=>t[0]===e&&t[1]===n,i)},ht=(t,e,[n,o],r)=>{rt(t,[e,n,o],t=>t[0]===e&&t[1]===n,r)},ft=(t,e,[n,o,r],i)=>{const s=t.get(n);void 0===s?t.set(n,new Set([[o,e,r]])):rt(s,[o,e,r],t=>t[0]===o&&t[1]===e,i)},dt=(t,[e,n,o],r)=>{const i=t.get(e);void 0===i?t.set(e,new Set([[n,o]])):rt(i,[n,o],t=>t[0]===n,r)},_t=(t,e,n,o)=>{const r=P(t,e),i=at(r,t=>t[0]===n&&t[1]===o);return 0===r.size&&t.delete(e),i},yt=(t,e,n)=>{const o=P(t,e),r=at(o,t=>t[0]===n);return 0===o.size&&t.delete(e),r},mt=(t,e,n,o)=>{const{activeInputs:r,passiveInputs:i}=D(e),{outputs:s}=D(t),a=B(t),u=s=>{const a=E(e),u=E(t);if("active"===s){const s=_t(i,t,n,o);pt(r,t,s,!1),et(u,a,n,o),st(e)&&W(e,"active")}else if("passive"===s){const s=((t,e,n,o)=>at(t[o],t=>t[0]===e&&t[1]===n))(r,t,n,o);ft(i,o,s,!1),ot(u,a,n,o),it(e)&&ut(e,r)}};rt(s,[e,n,o],t=>t[0]===e&&t[1]===n&&t[2]===o,!0)&&(a.add(u),it(t)?pt(r,t,[n,o,u],!0):ft(i,o,[t,n,u],!0))},vt=(t,e,n)=>{const{activeInputs:o,passiveInputs:r}=Q(t.context,e),{outputs:i}=D(t),s=B(t),a=i=>{const s=E(t),a=G(e);if("active"===i){const e=yt(r,t,n);ht(o,t,e,!1),s.connect(a,n)}else if("passive"===i){const e=((t,e,n)=>at(t,t=>t[0]===e&&t[1]===n))(o,t,n);dt(r,e,!1),s.disconnect(a,n)}};rt(i,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(s.add(a),it(t)?ht(o,t,[n,a],!0):dt(r,[t,n,a],!0))},gt=(t,e,n)=>{for(const o of t)if(o[0]===e&&o[1]===n)return t.delete(o),o;return null},bt=(t,e,n,o)=>{const[r,i]=((t,e,n,o)=>{const{activeInputs:r,passiveInputs:i}=D(e),s=gt(r[o],t,n);if(null===s){return[_t(i,t,n,o)[2],"passive"]}return[s[2],"active"]})(t,e,n,o);if(null!==r&&(nt(t,r),"active"===i&&ot(E(t),E(e),n,o)),it(e)){const{activeInputs:t}=D(e);ut(e,t)}},wt=(t,e,n)=>{const[o,r]=((t,e,n)=>{const{activeInputs:o,passiveInputs:r}=Q(t.context,e),i=gt(o,t,n);if(null===i){return[yt(r,t,n)[1],"passive"]}return[i[2],"active"]})(t,e,n);null!==o&&(nt(t,o),"active"===r&&E(t).disconnect(G(e),n))};class Ot{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,o)=>t.call(e,n,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const xt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},Tt=t=>{const e=[];for(let n=0;n<t;n+=1)e.push(1);return e};function Ct(t,e,n,o,r){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],o,r);else{const i=t.getChannelData(o);if(0===e[n].byteLength)e[n]=i.slice(r,r+128);else{const t=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const At=(t,e,n,o,r)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],o,r):0!==e[n].byteLength&&t.getChannelData(o).set(e[n],r)},St=(t,e)=>{const n=[];for(let o=0;o<t;o+=1){const t=[],r="number"==typeof e?e:e[o];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},kt=async(t,e,n,o,r)=>{const{length:i}=e,s=o.channelCount*o.numberOfInputs,a=o.outputChannelCount.reduce((t,e)=>t+e,0),u=0===a?null:n.createBuffer(a,i,e.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const c=D(t),l=await((t,e)=>{const n=P(v,t),o=E(e);return P(n,o)})(n,t),p=St(o.numberOfInputs,o.channelCount),h=St(o.numberOfOutputs,o.outputChannelCount),f=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let n=0;n<i;n+=128){for(let t=0;t<o.numberOfInputs;t+=1)for(let r=0;r<o.channelCount;r+=1)Ct(e,p[t],r,r,n);void 0!==r.parameterDescriptors&&r.parameterDescriptors.forEach(({name:t},o)=>{Ct(e,f,t,s+o,n)});for(let t=0;t<o.numberOfInputs;t+=1)for(let e=0;e<o.outputChannelCount[t];e+=1)0===h[t][e].byteLength&&(h[t][e]=new Float32Array(128));try{const e=p.map((t,e)=>0===c.activeInputs[e].size?[new Float32Array(0)]:t),r=l.process(e,h,f);if(null!==u)for(let t=0,e=0;t<o.numberOfOutputs;t+=1){for(let r=0;r<o.outputChannelCount[t];r+=1)At(u,h[t],r,e+r,n);e+=o.outputChannelCount[t]}if(!r)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{error:e}));break}}return u},Pt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Et={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},jt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Mt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Dt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},It={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Rt=(t,e,n)=>{const o=e[n];if(void 0===o)throw t();return o},Vt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Nt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},qt=()=>{try{return new DOMException("","InvalidAccessError")}catch(t){return t.code=15,t.name="InvalidAccessError",t}},Ft={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Lt=(t,e,n,o,r,i,s,a,u,c,l)=>{const p=c.length;let h=a;for(let a=0;a<p;a+=1){let p=n[0]*c[a];for(let e=1;e<r;e+=1){const o=h-e&u-1;p+=n[e]*i[o],p-=t[e]*s[o]}for(let t=r;t<o;t+=1)p+=n[t]*i[h-t&u-1];for(let n=r;n<e;n+=1)p-=t[n]*s[h-n&u-1];i[h]=c[a],s[h]=p,h=h+1&u-1,l[a]=p}return h},Bt=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch(t){}return!1},Wt={numberOfChannels:1},zt=(t,e,n)=>{const o=e[n];void 0!==o&&o!==t[n]&&(t[n]=o)},Ut=(t,e)=>{zt(t,e,"channelCount"),zt(t,e,"channelCountMode"),zt(t,e,"channelInterpretation")},Gt=t=>"function"==typeof t.getFloatTimeDomainData,Qt=(t,e,n)=>{const o=e[n];void 0!==o&&o!==t[n].value&&(t[n].value=o)},Xt=t=>{t.start=(e=>(n=0,o=0,r)=>{if("number"==typeof r&&r<0||o<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,o,r)})(t.start)},Yt=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},Zt=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Ht=async(t,e)=>{return new t(await(t=>new Promise((e,n)=>{const{port1:o,port2:r}=new MessageChannel;o.onmessage=({data:t})=>{o.close(),r.close(),e(t)},o.onmessageerror=({data:t})=>{o.close(),r.close(),n(t)},r.postMessage(t)}))(e))},$t=(t,e)=>(t.connect=(t,n=0,o=0)=>lt(t)?(e.connect.call(e,t,n,o),t):e.connect.call(e,t,n),t.disconnect=function(){e.disconnect.apply(e,arguments)},t);function Jt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Kt(t,e){let n=[0,0];for(let i=t.length-1;i>=0;i-=1)r=e,(n=[(o=n)[0]*r[0]-o[1]*r[1],o[0]*r[1]+o[1]*r[0]])[0]+=t[i];var o,r;return n}const te=()=>{try{return new DOMException("","NotSupportedError")}catch(t){return t.code=9,t.name="NotSupportedError",t}},ee={numberOfChannels:1},ne={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},oe={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},re={disableNormalization:!1},ie={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},se=()=>{try{return new DOMException("","UnknownError")}catch(t){return t.name="UnknownError",t}},ae={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ue=(t=>(e,n)=>{const o=b.get(e);if(void 0!==o)return o;const r=t.get(e);if(void 0!==r)return r;const i=n();return i instanceof Promise?(t.set(e,i),i.then(n=>(t.delete(e),b.set(e,n),n))):(b.set(e,i),i)})(new Map),ce=(()=>"undefined"==typeof window?null:window)(),le=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(ce),pe=(t=>e=>null!==t&&e instanceof t)(le),he=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(ce),fe=((t,e,n)=>o=>{if("closed"===o.state&&null!==e&&"webkitAudioContext"!==e.name){if(!t(o)){const t=f.get(o);if(void 0!==t)return t;const n=new e;return f.set(o,n),n}{const t=f.get(o);if(void 0!==t)return t;if(null!==n){const t=new n(1,1,44100);return f.set(o,t),t}}}return null})(pe,he,le),de=(t=>(e,n)=>{const o=t(e);return n(null!==o?o:e)})(fe),_e=((t,e,n)=>(o,r)=>{const i=n(o,t=>t.createAnalyser());if(Ut(i,r),!(r.maxDecibels>r.minDecibels))throw e();return zt(i,r,"fftSize"),zt(i,r,"maxDecibels"),zt(i,r,"minDecibels"),zt(i,r,"smoothingTimeConstant"),t(Gt,()=>Gt(i))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const o=Math.max(n.length,t.fftSize);for(let t=0;t<o;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(ue,q,de),ye=(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);if(!j(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,fftSize:r.fftSize,maxDecibels:r.maxDecibels,minDecibels:r.minDecibels,smoothingTimeConstant:r.smoothingTimeConstant};r=t(o,e)}return e.set(o,r),await R(n,o,r),r})(n,o)}}})(_e),me=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(ce),ve=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(ce),ge=((t,e,n,o,r,i,a,c)=>(class extends ${constructor(e,n,o,r){super(o),this._context=e,this._nativeAudioNode=o;const i=O(e);c(i)||!0===t(ct,()=>ct(i))||(t=>{const e=new Map;t.connect=(t=>(n,o=0,r=0)=>{const i=lt(n)?t(n,o,r):t(n,o),s=e.get(n);return void 0===s?e.set(n,[{input:r,output:o}]):s.every(t=>t.input!==r||t.output!==o)&&s.push({input:r,output:o}),i})(t.connect.bind(t)),t.disconnect=(n=>(o,r,i)=>{if(n.apply(t),void 0===o)e.clear();else if("number"==typeof o)for(const[t,n]of e){const r=n.filter(t=>t.output!==o);0===r.length?e.delete(t):e.set(t,r)}else if(e.has(o))if(void 0===r)e.delete(o);else{const t=e.get(o);if(void 0!==t){const n=t.filter(t=>t.output!==r&&(t.input!==i||void 0===i));0===n.length?e.delete(o):e.set(o,n)}}for(const[n,o]of e)o.forEach(e=>{lt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)})})(t.disconnect)})(o),"active"===n&&s.add(this),u.set(this,o),y.set(this,new Set),((t,e,n,o)=>{const r=[];for(let t=0;t<o.numberOfInputs;t+=1)r.push(new Set);const{nodes:i}=M(t);i.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})})(e,this,r,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,e=0,s=0){const u=O(this._context),l=c(u);if(i(t)||a(t))throw n();if(J(t)){const o=E(t);try{const r=et(this._nativeAudioNode,o,e,s);if(l||st(this)?this._nativeAudioNode.disconnect(...r):st(t)&&W(t,"active"),tt(t)){const t=h.get(o);if(void 0===t){const t=u.createGain();t.connect(r[0],0,r[2]),h.set(o,new Map([[s,t]]))}else if(void 0===t.get(s)){const e=u.createGain();e.connect(r[0],0,r[2]),t.set(s,e)}}}catch(t){if(12===t.code)throw n();throw t}return r(this,t),l?((t,e,n,o)=>{const{activeInputs:r}=D(e),{outputs:i}=D(t);rt(i,[e,n,o],t=>t[0]===e&&t[1]===n&&t[2]===o,!0)&&pt(r,t,[n,o,null],!0)})(this,t,e,s):mt(this,t,e,s),t}const p=G(t);if("playbackRate"===p.name)throw o();try{this._nativeAudioNode.connect(p,e),(l||st(this))&&this._nativeAudioNode.disconnect(p,e)}catch(t){if(12===t.code)throw n();throw t}r(this,t),l?((t,e,n)=>{const{activeInputs:o}=Q(t.context,e),{outputs:r}=D(t);rt(r,[e,n],t=>t[0]===e&&t[1]===n,!0)&&ht(o,t,[n,null],!0)})(this,t,e):vt(this,t,e)}disconnect(t,o,r){if(void 0===t)(t=>{const e=D(t);for(const n of e.outputs)K(n)?bt(t,...n):wt(t,...n);e.outputs.clear()})(this);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw e();((t,e)=>{const n=D(t);for(const o of n.outputs)o[1]===e&&(K(o)?bt(t,...o):wt(t,...o),n.outputs.delete(o))})(this,t)}else{if(void 0!==o&&(o<0||o>=this.numberOfOutputs))throw e();if(J(t)&&void 0!==r&&(r<0||r>=t.numberOfInputs))throw e();if(0===((t,e,n,o)=>{const r=D(t);return Array.from(r.outputs).filter(t=>!(t[0]!==e||void 0!==n&&t[1]!==n||void 0!==o&&t[2]!==o)).reduce((e,n)=>(K(n)?bt(t,...n):wt(t,...n),r.outputs.delete(n),e+1),0)})(this,t,o,r))throw n()}}}))(ue,q,qt,te,((t,e,n,o)=>(function r(i,s){const a=J(s)?s:o(t,s);if((t=>"delayTime"in t)(a))return!0;if(i===a)throw e();const{outputs:u}=n(a);for(const t of u)if(r(i,t[0]))return!0;return!1}))(p,te,D,P),me,ve,pe),be=(t=>(class extends t{constructor(t,e,n,o){super(t,e,n,o)}}))(ge),we=((t,e,n,o,r)=>(class extends r{constructor(e,r=k){const i=O(e),s={...k,...r},a=n(i,s);super(e,"passive",a,o(i)?t():null),this._nativeAnalyserNode=a}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const n=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=n,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const n=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=n,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}}))(ye,q,_e,pe,be),Oe=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(ce),xe=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),Te=((t,e)=>n=>{n.copyFromChannel=(o,r,i=0)=>{const s=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(a),l=o.length;for(let t=s<0?-s:0;t+s<u&&t<l;t+=1)o[t]=c[t+s]},n.copyToChannel=(o,r,i=0)=>{const s=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(a),l=o.length;for(let t=s<0?-s:0;t+s<u&&t<l;t+=1)c[t+s]=o[t]}})(xe,q),Ce=(t=>e=>{e.copyFromChannel=(n=>(o,r,i=0)=>{const s=t(i),a=t(r);if(s<e.length)return n.call(e,o,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(o,r,i=0)=>{const s=t(i),a=t(r);if(s<e.length)return n.call(e,o,a,s)})(e.copyToChannel)})(xe),Ae=((t,e)=>n=>{n.copyFromChannel=(o=>(r,i,s=0)=>{const a=t(s),u=t(i);if(u>=n.numberOfChannels)throw e();return a<n.length&&n.length-a<r.length?o.call(n,r.subarray(0,n.length-a),u,a):o.call(n,r,u,a)})(n.copyFromChannel),n.copyToChannel=(o=>(r,i,s=0)=>{const a=t(s),u=t(i);if(u>=n.numberOfChannels)throw e();return a<n.length&&n.length-a<r.length?o.call(n,r.subarray(0,n.length-a),u,a):o.call(n,r,u,a)})(n.copyToChannel)})(xe,q),Se=((t,e,n,o,r,i,s,a,u)=>{let c=null;return class l{constructor(l){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:p,numberOfChannels:h,sampleRate:f}={...L,...l};null===c&&(c=new r(1,1,44100));const d=null!==o&&e(i,i)?new o({length:p,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,p,f);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(s(d),F(d)):e(N,()=>N(d))?e(V,()=>V(d))||a(d):(u(d),a(d)),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===l.prototype||t.has(e)}}})(a,ue,te,Oe,le,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch(t){return!1}return!0})(Oe),Te,Ce,Ae),ke=(t=>e=>{const n=t(e,t=>t.createOscillator());try{n.start(-1)}catch(t){return t instanceof RangeError}return!1})(de),Pe=(t=>e=>{const n=e.createBuffer(1,1,44100),o=t(e,t=>t.createBufferSource());o.buffer=n,o.start(),o.stop();try{return o.stop(),!0}catch(t){return!1}})(de),Ee=(t=>e=>{const n=t(e,t=>t.createOscillator());try{n.stop(-1)}catch(t){return t instanceof RangeError}return!1})(de),je=(t=>(e,n)=>{const o=t(n,t=>t.createGain());e.connect(o);const r=(t=>()=>{t.call(e,o),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),$t(e,o),e.stop=(t=>{let n=!1;return(r=0)=>{if(n)try{t.call(e,r)}catch(t){o.gain.setValueAtTime(0,r)}else t.call(e,r),n=!0}})(e.stop)})(de),Me=((t,e,n,o,r,i,s,a,u,c)=>(l,p={})=>{const h=e(l,t=>t.createBufferSource());return Ut(h,p),Qt(h,p,"playbackRate"),zt(h,p,"buffer"),zt(h,p,"loop"),zt(h,p,"loopEnd"),zt(h,p,"loopStart"),t(n,()=>n(l))||(t=>{t.start=(e=>{let n=!1;return(o=0,r=0,i)=>{if(n)throw w();e.call(t,o,r,i),n=!0}})(t.start)})(h),t(o,o)||((t,e)=>{let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;t.start=((r,i)=>(s=0,a=0,u=Number.POSITIVE_INFINITY)=>{if(r.call(t,s,a),u>=0&&u<Number.POSITIVE_INFINITY){const r=Math.max(s,e.currentTime),a=u/t.playbackRate.value;n=r+a,i.call(t,Math.min(n,o))}})(t.start,t.stop),t.stop=(r=>(i=0)=>{o=Math.max(i,e.currentTime),r.call(t,Math.min(n,o))})(t.stop)})(h,l),t(r,()=>r(l))||u(h),t(i,()=>i(l))||Xt(h),t(s,()=>s(l))||c(h,l),t(a,()=>a(l))||Yt(h),h})(ue,de,(t=>e=>{const n=t(e,t=>t.createBufferSource());n.start();try{n.start()}catch(t){return!0}return!1})(de),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),n=e.createBuffer(1,1,e.sampleRate),o=e.createBufferSource();return n.getChannelData(0)[0]=1,o.buffer=n,o.start(0,0,0),o.connect(e.destination),new Promise(t=>{e.oncomplete=({renderedBuffer:e})=>{t(0===e.getChannelData(0)[0])},e.startRendering()})})(le),(t=>e=>{const n=t(e,t=>t.createBufferSource()),o=e.createBuffer(1,1,44100);n.buffer=o;try{n.start(0,1)}catch(t){return!1}return!0})(de),ke,Pe,Ee,t=>{t.start=(e=>(n=0,o=0,r)=>{const i=t.buffer,s=null===i?o:Math.min(i.duration,o);null!==i&&s>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,r)})(t.start)},je),De=(t=>()=>{const e=new WeakMap;let n=null,o=null;return{set start(t){n=t},set stop(t){o=t},render(r,i){const s=e.get(i);return void 0!==s?Promise.resolve(s):(async(r,i)=>{let s=E(r);const a=j(s,i);if(!a){const e={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,loop:s.loop,loopEnd:s.loopEnd,loopStart:s.loopStart,playbackRate:s.playbackRate.value};s=t(i,e),null!==n&&s.start(...n),null!==o&&s.stop(o)}return e.set(i,s),a?await Y(r.context,i,r.playbackRate):await Z(r.context,i,r.playbackRate,s.playbackRate),await R(r,i,s),s})(r,i)}}})(Me),Ie=((t,e,n,o,i,s,a,u,c)=>(h,f,d,_=null,y=null)=>{const m=new r.AutomationEventList(d.defaultValue),v=f?t(m):null,g={get defaultValue(){return d.defaultValue},get maxValue(){return null===_?d.maxValue:_},get minValue(){return null===y?d.minValue:y},get value(){return d.value},set value(t){d.value=t,g.setValueAtTime(t,h.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof d.cancelAndHoldAtTime)null===v&&m.flush(h.context.currentTime),m.add(e(t)),d.cancelAndHoldAtTime(t);else{const n=Array.from(m).pop();null===v&&m.flush(h.context.currentTime),m.add(e(t));const o=Array.from(m).pop();d.cancelScheduledValues(t),n!==o&&void 0!==o&&("exponentialRampToValue"===o.type?d.exponentialRampToValueAtTime(o.value,o.endTime):"linearRampToValue"===o.type?d.linearRampToValueAtTime(o.value,o.endTime):"setValue"===o.type?d.setValueAtTime(o.value,o.startTime):"setValueCurve"===o.type&&d.setValueCurveAtTime(o.values,o.startTime,o.duration))}return g},cancelScheduledValues:t=>(null===v&&m.flush(h.context.currentTime),m.add(n(t)),d.cancelScheduledValues(t),g),exponentialRampToValueAtTime:(t,e)=>(null===v&&m.flush(h.context.currentTime),m.add(o(t,e)),d.exponentialRampToValueAtTime(t,e),g),linearRampToValueAtTime:(t,e)=>(null===v&&m.flush(h.context.currentTime),m.add(i(t,e)),d.linearRampToValueAtTime(t,e),g),setTargetAtTime:(t,e,n)=>(null===v&&m.flush(h.context.currentTime),m.add(s(t,e,n)),d.setTargetAtTime(t,e,n),g),setValueAtTime:(t,e)=>(null===v&&m.flush(h.context.currentTime),m.add(a(t,e)),d.setValueAtTime(t,e),g),setValueCurveAtTime(t,e,n){if(null!==c&&"webkitAudioContext"===c.name){const o=e+n,r=h.context.sampleRate,i=Math.ceil(e*r),s=Math.floor(o*r),a=s-i,c=new Float32Array(a);for(let o=0;o<a;o+=1){const s=(t.length-1)/n*((i+o)/r-e),a=Math.floor(s),u=Math.ceil(s);c[o]=a===u?t[a]:(1-(s-a))*t[a]+(1-(u-s))*t[u]}null===v&&m.flush(h.context.currentTime),m.add(u(c,e,n)),d.setValueCurveAtTime(c,e,n);const l=s/r;l<o&&g.setValueAtTime(c[c.length-1],l),g.setValueAtTime(t[t.length-1],o)}else null===v&&m.flush(h.context.currentTime),m.add(u(t,e,n)),d.setValueCurveAtTime(t,e,n);return g}};return l.set(g,d),p.set(g,h),((t,e,n)=>{M(t).params.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})})(h.context,g,v),g})(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:o}=n;e.exponentialRampToValueAtTime(o,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:o}=n;e.linearRampToValueAtTime(o,t)}else if("setTarget"===n.type){const{startTime:t,target:o,timeConstant:r}=n;e.setTargetAtTime(o,t,r)}else if("setValue"===n.type){const{startTime:t,value:o}=n;e.setValueAtTime(o,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:o,values:r}=n;e.setValueCurveAtTime(r,o,t)}}}}),r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,he),Re=((t,e,n,o,r,i)=>(class extends i{constructor(n,i=U){const s=O(n),a={...U,...i},u=o(s,a),c=r(s),l=c?t():null;super(n,"passive",u,l),this._audioBufferSourceNodeRenderer=l,this._isBufferNullified=!1,this._isBufferSet=!1,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=e(this,c,u.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){try{this._nativeAudioBufferSourceNode.buffer=t}catch(e){if(null!==t||17!==e.code)throw e;if(null!==this._nativeAudioBufferSourceNode.buffer){const t=this._nativeAudioBufferSourceNode.buffer,e=t.numberOfChannels;for(let n=0;n<e;n+=1)t.getChannelData(n).fill(0);this._isBufferNullified=!0}}if(null!==t){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get onended(){return this._onended}set onended(t){const e=z(this,t);this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=n===e?t:n}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n];else{W(this,"active");const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),setTimeout(()=>W(this,"passive"),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}}))(De,Ie,w,Me,pe,be),Ve=((t,e,n,o,r,i)=>(class extends t{constructor(t,n){const o=O(t),s=i(o),a=r(o,n,s),u=s?e():null,l={audioWorkletGlobalScope:null,nodes:new WeakMap,params:new WeakMap};c.set(t,l),super(t,"passive",a,u),this._isNodeOfNativeOfflineAudioContext=s,this._nativeAudioDestinationNode=a}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}}))(ge,()=>{let t=null;return{render:(e,n)=>(null===t&&(t=(async(t,e)=>{const n=e.destination;return await R(t,e,n),n})(e,n)),t)}},q,w,(t,e,n)=>{const o=t.destination;return o.channelCount!==e&&(o.channelCount=e),n&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{get:()=>o.channelCount}),o},pe),Ne=(t=>(e,n)=>{const o=t(e,t=>t.createBiquadFilter());return Ut(o,n),Qt(o,n,"Q"),Qt(o,n,"detune"),Qt(o,n,"frequency"),Qt(o,n,"gain"),zt(o,n,"type"),o})(de),qe=((t,e,n,o,r,i)=>(class extends i{constructor(n,i=Pt){const s=O(n),a={...Pt,...i},u=o(s,a),c=r(s);super(n,"passive",u,c?e():null),this._Q=t(this,c,u.Q,34028234663852886e22,-34028234663852886e22),this._detune=t(this,c,u.detune,34028234663852886e22,-34028234663852886e22),this._frequency=t(this,c,u.frequency,34028234663852886e22,-34028234663852886e22),this._gain=t(this,c,u.gain,34028234663852886e22,-34028234663852886e22),this._nativeBiquadFilterNode=u}get Q(){return this._Q}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,o){if(this._nativeBiquadFilterNode.getFrequencyResponse(t,e,o),t.length!==e.length||e.length!==o.length)throw n()}}))(Ie,(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);const i=j(r,o);if(!i){const e={Q:r.Q.value,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,detune:r.detune.value,frequency:r.frequency.value,gain:r.gain.value,type:r.type};r=t(o,e)}return e.set(o,r),i?(await Y(n.context,o,n.Q),await Y(n.context,o,n.detune),await Y(n.context,o,n.frequency),await Y(n.context,o,n.gain)):(await Z(n.context,o,n.Q,r.Q),await Z(n.context,o,n.detune,r.detune),await Z(n.context,o,n.frequency,r.frequency),await Z(n.context,o,n.gain,r.gain)),await R(n,o,r),r})(n,o)}}})(Ne),qt,Ne,pe,be),Fe=((t,e)=>(n,o)=>{const r=e(n,t=>t.createBufferSource());o.channelCount=1,o.channelCountMode="explicit";const i=o.numberOfInputs;for(let t=0;t<i;t+=1)r.connect(o,0,t);Object.defineProperty(o,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}})})(w,de),Le=((t,e)=>(n,o)=>{const r=t(n,t=>t.createChannelMerger(o.numberOfInputs));Ut(r,o),1!==r.channelCount&&"explicit"!==r.channelCountMode&&e(n,r);try{r.channelCount=void 0===o.numberOfInputs?6:o.numberOfInputs,e(n,r)}catch(t){}return r})(de,Fe),Be=((t,e,n,o)=>(class extends o{constructor(o,r=Et){const i=O(o),s={...Et,...r};super(o,"passive",e(i,s),n(i)?t():null)}}))((t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);if(!j(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfInputs:r.numberOfInputs};r=t(o,e)}return e.set(o,r),await R(n,o,r),r})(n,o)}}})(Le),Le,pe,be),We=(t=>(e,n)=>{const o=t(e,t=>t.createChannelSplitter(n.numberOfOutputs));return Ut(o,n),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw w()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw w()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw w()}})})(o),o})(de),ze=((t,e,n,o)=>(class extends o{constructor(o,r=jt){const i=O(o),s=(t=>({...t,channelCount:t.numberOfOutputs}))({...jt,...r});super(o,"passive",e(i,s),n(i)?t():null)}}))((t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);if(!j(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfOutputs:r.numberOfOutputs};r=t(o,e)}return e.set(o,r),await R(n,o,r),r})(n,o)}}})(We),We,pe,be),Ue=(t=>(e,n)=>{const o=t(e,t=>t.createGain());return Ut(o,n),Qt(o,n,"gain"),o})(de),Ge=((t,e)=>(n,{offset:o,...r})=>{const i=t(n),s=n.createBuffer(1,2,n.sampleRate),a=e(n,{...r,gain:o}),u=s.getChannelData(0);return u[0]=1,u[1]=1,i.buffer=s,i.loop=!0,i.connect(a),$t({get bufferSize(){},get channelCount(){return a.channelCount},set channelCount(t){a.channelCount=t},get channelCountMode(){return a.channelCountMode},set channelCountMode(t){a.channelCountMode=t},get channelInterpretation(){return a.channelInterpretation},set channelInterpretation(t){a.channelInterpretation=t},get context(){return a.context},get inputs(){},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return a.numberOfOutputs},get offset(){return a.gain},get onended(){return i.onended},set onended(t){i.onended=t},addEventListener:(...t)=>i.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>i.dispatchEvent(t[0]),removeEventListener:(...t)=>i.removeEventListener(t[0],t[1],t[2]),start(t=0){i.start.call(i,t)},stop(t=0){i.stop.call(i,t)}},a)})(Me,Ue),Qe=((t,e,n,o,r)=>(i,s)=>{if(void 0===i.createConstantSource)return n(i,s);const a=e(i,t=>t.createConstantSource());return Ut(a,s),Qt(a,s,"offset"),t(o,()=>o(i))||Xt(a),t(r,()=>r(i))||Yt(a),a})(ue,de,Ge,ke,Ee),Xe=((t,e,n,o,r)=>(class extends r{constructor(r,i=Mt){const s=O(r),a={...Mt,...i},u=n(s,a),c=o(s),l=c?e():null;super(r,"passive",u,l),this._constantSourceNodeRenderer=l,this._nativeConstantSourceNode=u,this._offset=t(this,c,u.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e=z(this,t);this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=t;else{W(this,"active");const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),setTimeout(()=>W(this,"passive"),1e3)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}}))(Ie,(t=>()=>{const e=new WeakMap;let n=null,o=null;return{set start(t){n=t},set stop(t){o=t},render(r,i){const s=e.get(i);return void 0!==s?Promise.resolve(s):(async(r,i)=>{let s=E(r);const a=j(s,i);if(!a){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,offset:s.offset.value};s=t(i,e),null!==n&&s.start(n),null!==o&&s.stop(o)}return e.set(i,s),a?await Y(r.context,i,r.offset):await Z(r.context,i,r.offset,s.offset),await R(r,i,s),s})(r,i)}}})(Qe),Qe,pe,be),Ye=((t,e)=>(n,o)=>{const r=t(n,t=>t.createConvolver());if(Ut(r,o),o.disableNormalization===r.normalize&&(r.normalize=!o.disableNormalization),zt(r,o,"buffer"),2!==o.channelCount)throw e();if(Object.defineProperty(r,"channelCount",{get:()=>o.channelCount,set:t=>{if(t!==o.channelCount)throw e()}}),"clamped-max"!==o.channelCountMode)throw e();return Object.defineProperty(r,"channelCountMode",{get:()=>o.channelCountMode,set:t=>{if(t!==o.channelCountMode)throw e()}}),r})(de,te),Ze=((t,e,n,o)=>(class extends o{constructor(o,r=Dt){const i=O(o),s={...Dt,...r},a=e(i,s);super(o,"passive",a,n(i)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=a}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}}))((t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);if(!j(r,o)){const e={buffer:r.buffer,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,disableNormalization:!r.normalize};r=t(o,e)}return e.set(o,r),await R(n,o,r),r})(n,o)}}})(Ye),Ye,pe,be),He=(t=>(e,n)=>{const o=t(e,t=>t.createDelay(n.maxDelayTime));return Ut(o,n),Qt(o,n,"delayTime"),o})(de),$e=((t,e,n,o,r)=>(class extends r{constructor(r,i=It){const s=O(r),a={...It,...i},u=n(s,a),c=o(s);super(r,"passive",u,c?e(a.maxDelayTime):null),this._delayTime=t(this,c,u.delayTime,a.maxDelayTime,0)}get delayTime(){return this._delayTime}}))(Ie,(t=>e=>{const n=new WeakMap;return{render(o,r){const i=n.get(r);return void 0!==i?Promise.resolve(i):(async(o,r)=>{let i=E(o);const s=j(i,r);if(!s){const n={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,delayTime:i.delayTime.value,maxDelayTime:e};i=t(r,n)}return n.set(r,i),s?await Y(o.context,r,o.delayTime):await Z(o.context,r,o.delayTime,i.delayTime),await R(o,r,i),i})(o,r)}}})(He),He,pe,be),Je=((t,e)=>(n,o)=>{const r=t(n,t=>t.createDynamicsCompressor());if(Ut(r,o),o.channelCount>2)throw e();if("max"===o.channelCountMode)throw e();return Qt(r,o,"attack"),Qt(r,o,"knee"),Qt(r,o,"ratio"),Qt(r,o,"release"),Qt(r,o,"threshold"),r})(de,te),Ke=((t,e,n,o,r,i)=>(class extends i{constructor(o,i=Vt){const s=O(o),a={...Vt,...i},u=n(s,a),c=r(s);super(o,"passive",u,c?e():null),this._attack=t(this,c,u.attack,1,0),this._knee=t(this,c,u.knee,40,0),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,c,u.ratio,20,1),this._release=t(this,c,u.release,1,0),this._threshold=t(this,c,u.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}}))(Ie,(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);const i=j(r,o);if(!i){const e={attack:r.attack.value,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,knee:r.knee.value,ratio:r.ratio.value,release:r.release.value,threshold:r.threshold.value};r=t(o,e)}return e.set(o,r),i?(await Y(n.context,o,n.attack),await Y(n.context,o,n.knee),await Y(n.context,o,n.ratio),await Y(n.context,o,n.release),await Y(n.context,o,n.threshold)):(await Z(n.context,o,n.attack,r.attack),await Z(n.context,o,n.knee,r.knee),await Z(n.context,o,n.ratio,r.ratio),await Z(n.context,o,n.release,r.release),await Z(n.context,o,n.threshold,r.threshold)),await R(n,o,r),r})(n,o)}}})(Je),Je,te,pe,be),tn=((t,e,n,o,r)=>(class extends r{constructor(r,i=Nt){const s=O(r),a={...Nt,...i},u=n(s,a),c=o(s);super(r,"passive",u,c?e():null),this._gain=t(this,c,u.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}}))(Ie,(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);const i=j(r,o);if(!i){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:r.gain.value};r=t(o,e)}return e.set(o,r),i?await Y(n.context,o,n.gain):await Z(n.context,o,n.gain,r.gain),await R(n,o,r),r})(n,o)}}})(Ue),Ue,pe,be),en=(t=>(e,n,o,r)=>t(e,t=>t.createScriptProcessor(n,o,r)))(de),nn=((t,e,n,o)=>(r,i,{channelCount:s,channelCountMode:a,channelInterpretation:u,feedback:c,feedforward:l})=>{const p=Zt(i,r.sampleRate),h=c.length,f=l.length,d=Math.min(h,f);if(0===c.length||c.length>20)throw o();if(0===c[0])throw e();if(0===l.length||l.length>20)throw o();if(0===l[0])throw e();if(1!==c[0]){for(let t=0;t<f;t+=1)l[t]/=c[0];for(let t=1;t<h;t+=1)c[t]/=c[0]}const _=n(r,p,s,s);_.channelCount=s,_.channelCountMode=a,_.channelInterpretation=u;const y=[],m=[],v=[];for(let t=0;t<s;t+=1){y.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),m.push(t),v.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,o=e.numberOfChannels;for(let t=0;t<o;t+=1){const o=e.getChannelData(t),r=n.getChannelData(t);y[t]=Lt(c,h,l,f,d,m[t],v[t],y[t],32,o,r)}};const g=r.sampleRate/2;return $t({get bufferSize(){return p},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,o){if(e.length!==n.length||n.length!==o.length)throw t();const r=e.length;for(let t=0;t<r;t+=1){const r=-Math.PI*(e[t]/g),i=[Math.cos(r),Math.sin(r)],s=Jt(Kt(l,i),Kt(c,i));n[t]=Math.sqrt(s[0]*s[0]+s[1]*s[1]),o[t]=Math.atan2(s[1],s[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(qt,w,en,te),on=((t,e,n,o)=>r=>t(Bt,()=>Bt(r))?Promise.resolve(t(o,o)).then(t=>{if(!t){const t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()}):new Promise(t=>{const n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()}))(ue,Ue,en,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),o=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{o.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(Ue,le)),rn=((t,e,n,o)=>(r,i)=>{const s=new WeakMap,a=async(a,u)=>{let c=E(a),l=null;const p=j(c,u);if(void 0===u.createIIRFilter?l=t(u):p||(c=e(u,t=>t.createIIRFilter(i,r))),s.set(u,null===l?c:l),null!==l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(a.context.destination.channelCount,a.context.length,u.sampleRate);await R(a,t,t.destination);const e=await o(t);return l.buffer=((t,e,n,o)=>{const r=n.length,i=o.length,s=Math.min(r,i);if(1!==n[0]){for(let t=0;t<r;t+=1)o[t]/=n[0];for(let t=1;t<i;t+=1)n[t]/=n[0]}const a=new Float32Array(32),u=new Float32Array(32),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),l=t.numberOfChannels;for(let e=0;e<l;e+=1){const l=t.getChannelData(e),p=c.getChannelData(e);a.fill(0),u.fill(0),Lt(n,r,o,i,s,a,u,0,32,l,p)}return c})(e,u,r,i),l.start(0),l}return await R(a,u,c),c};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}})(Me,de,le,on),sn=((t,e,n,o)=>(class extends o{constructor(o,r){const i=O(o),s=n(i),a={...Ft,...r},u=t(i,s?null:o.baseLatency,a);super(o,"passive",u,s?e(a.feedback,a.feedforward):null),(t=>{t.getFrequencyResponse=(e=>(n,o,r)=>{if(n.length!==o.length||o.length!==r.length)throw qt();return e.call(t,n,o,r)})(t.getFrequencyResponse)})(u),this._nativeIIRFilterNode=u}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}}))(((t,e)=>(n,o,r)=>{if(void 0===n.createIIRFilter)return e(n,o,r);const i=t(n,t=>t.createIIRFilter(r.feedforward,r.feedback));return Ut(i,r),i})(de,nn),rn,pe,be),an=((t,e)=>(class extends ${constructor(n,o){super(n),this._nativeContext=n,d.set(this,n);const r=n.sampleRate;Object.defineProperty(n,"sampleRate",{get:()=>r}),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e=z(this,t);this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}}))(Ve,((t,e,n,o,r)=>(i,s)=>{const a=s.listener,{forwardX:u,forwardY:c,forwardZ:l,positionX:p,positionY:h,positionZ:f,upX:d,upY:_,upZ:y}=void 0===a.forwardX?(()=>{const u=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=r(s),l=o(s,256,9,0),p=(e,o)=>{const r=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});return r.connect(u,0,e),r.start(),Object.defineProperty(r.offset,"defaultValue",{get:()=>o}),t({context:i},c,r.offset,34028234663852886e22,-34028234663852886e22)};let h=[0,0,-1,0,1,0],f=[0,0,0];return l.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some((t,e)=>t!==h[e])&&(a.setOrientation(...e),h=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some((t,e)=>t!==f[e])&&(a.setPosition(...n),f=n)},u.connect(l),{forwardX:p(0,0),forwardY:p(1,0),forwardZ:p(2,-1),positionX:p(6,0),positionY:p(7,0),positionZ:p(8,0),upX:p(3,0),upY:p(4,1),upZ:p(5,0)}})():a;return{get forwardX(){return u},get forwardY(){return c},get forwardZ(){return l},get positionX(){return p},get positionY(){return h},get positionZ(){return f},get upX(){return d},get upY(){return _},get upZ(){return y}}})(Ie,Le,Qe,en,pe)),un=((t,e,n,o,r,i)=>(s,a)=>{const u=e(s,t=>t.createOscillator());return Ut(u,a),Qt(u,a,"detune"),Qt(u,a,"frequency"),void 0!==a.periodicWave?u.setPeriodicWave(a.periodicWave):zt(u,a,"type"),t(n,()=>n(s))||Xt(u),t(o,()=>o(s))||i(u,s),t(r,()=>r(s))||Yt(u),u})(ue,de,ke,Pe,Ee,je),cn=(t=>()=>{const e=new WeakMap;let n=null,o=null,r=null;return{set periodicWave(t){n=t},set start(t){o=t},set stop(t){r=t},render(i,s){const a=e.get(s);return void 0!==a?Promise.resolve(a):(async(i,s)=>{let a=E(i);const u=j(a,s);if(!u){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,detune:a.detune.value,frequency:a.frequency.value,periodicWave:null===n?void 0:n,type:a.type};a=t(s,e),null!==o&&a.start(o),null!==r&&a.stop(r)}return e.set(s,a),u?(await Y(i.context,s,i.detune),await Y(i.context,s,i.frequency)):(await Z(i.context,s,i.detune,a.detune),await Z(i.context,s,i.frequency,a.frequency)),await R(i,s,a),a})(i,s)}}})(un),ln=((t,e,n,o,r,i)=>(class extends i{constructor(e,i=ne){const s=O(e),a={...ne,...i},u=n(s,a),c=r(s),l=c?o():null,p=e.sampleRate/2;super(e,"passive",u,l),this._detune=t(this,c,u.detune,153600,-153600),this._frequency=t(this,c,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=l,null!==this._oscillatorNodeRenderer&&void 0!==a.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=a.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e=z(this,t);this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){if(this._nativeOscillatorNode.type=t,"custom"===t)throw e();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=t;else{W(this,"active");const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),setTimeout(()=>W(this,"passive"),1e3)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}}))(Ie,w,un,cn,pe,be),pn=((t,e,n)=>(o,{curve:r,oversample:i,...s})=>{const a=e(o,t=>t.createWaveShaper()),u=e(o,t=>t.createWaveShaper());Ut(a,s),Ut(u,s);const c=n(o,{...s,gain:1}),l=n(o,{...s,gain:-1}),p=n(o,{...s,gain:1}),h=n(o,{...s,gain:-1});c.connect(a),a.connect(p),c.connect(l),l.connect(u),u.connect(h),h.connect(p);let f=null;const d={get bufferSize(){},get channelCount(){return a.channelCount},set channelCount(t){c.channelCount=t,l.channelCount=t,a.channelCount=t,p.channelCount=t,u.channelCount=t,h.channelCount=t},get channelCountMode(){return a.channelCountMode},set channelCountMode(t){c.channelCountMode=t,l.channelCountMode=t,a.channelCountMode=t,p.channelCountMode=t,u.channelCountMode=t,h.channelCountMode=t},get channelInterpretation(){return a.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t,l.channelInterpretation=t,a.channelInterpretation=t,p.channelInterpretation=t,u.channelInterpretation=t,h.channelInterpretation=t},get context(){return a.context},get curve(){return f},set curve(e){if(null!==r&&r.length<2)throw t();if(null===e)a.curve=e,u.curve=e;else{const t=e.length,n=new Float32Array(t+2-t%2),o=new Float32Array(t+2-t%2);n[0]=e[0],o[0]=-e[t-1];const r=Math.ceil((t+1)/2),i=(t+1)/2-1;for(let s=1;s<r;s+=1){const a=s/r*i,u=Math.floor(a),c=Math.ceil(a);n[s]=u===c?e[u]:(1-(a-u))*e[u]+(1-(c-a))*e[c],o[s]=u===c?-e[t-1-u]:-(1-(a-u))*e[t-1-u]-(1-(c-a))*e[t-1-c]}n[r]=t%2==1?e[r-1]:(e[r-2]+e[r-1])/2,a.curve=n,u.curve=o}f=e},get inputs(){return[c]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return a.numberOfOutputs},get oversample(){return a.oversample},set oversample(t){a.oversample=t,u.oversample=t},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};return r!==d.curve&&(d.curve=r),i!==d.oversample&&(d.oversample=i),$t(d,p)})(w,de,Ue),hn=((t,e,n)=>(o,r)=>{const i=e(o,t=>t.createWaveShaper());try{return i.curve=new Float32Array([1]),n(o,r)}catch(t){}Ut(i,r);const s=r.curve;if(null!==s&&s.length<2)throw t();return zt(i,r,"curve"),zt(i,r,"oversample"),i})(w,de,pn),fn=((t,e,n,o,r,i,s)=>(a,{coneInnerAngle:u,coneOuterAngle:c,coneOuterGain:l,distanceModel:p,maxDistance:h,orientationX:f,orientationY:d,orientationZ:_,panningModel:y,positionX:m,positionY:v,positionZ:g,refDistance:b,rolloffFactor:w,...O})=>{const x=e(a,t=>t.createPanner());if(O.channelCount>2)throw s();if("max"===O.channelCountMode)throw s();Ut(x,O);const T={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},C=n(a,{...T,channelInterpretation:"speakers",numberOfInputs:6}),A=o(a,{...O,gain:1}),S=o(a,{...T,gain:1}),k=o(a,{...T,gain:0}),P=o(a,{...T,gain:0}),E=o(a,{...T,gain:0}),j=o(a,{...T,gain:0}),M=o(a,{...T,gain:0}),D=r(a,256,6,0),I=i(a,{...T,curve:new Float32Array([1,1]),oversample:"none"});let R=[1,0,0],V=[0,0,0];D.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some((t,e)=>t!==R[e])&&(x.setOrientation(...e),R=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some((t,e)=>t!==V[e])&&(x.setPosition(...n),V=n)},A.connect(x),et(A,I,0,0),I.connect(S),I.connect(k),I.connect(P),I.connect(E),I.connect(j),I.connect(M),S.connect(C),k.connect(C),P.connect(C),E.connect(C),j.connect(C),M.connect(C),C.connect(D),Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0});const N={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(t){if(t>2)throw s();A.channelCount=t,x.channelCount=t},get channelCountMode(){return x.channelCountMode},set channelCountMode(t){if("max"===t)throw s();A.channelCountMode=t,x.channelCountMode=t},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(t){A.channelInterpretation=t,x.channelInterpretation=t},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(t){x.coneInnerAngle=t},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(t){x.coneOuterAngle=t},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();x.coneOuterGain=e},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(t){x.distanceModel=t},get inputs(){return[A]},get maxDistance(){return x.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;x.maxDistance=t},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return S.gain},get orientationY(){return k.gain},get orientationZ(){return P.gain},get panningModel(){return x.panningModel},set panningModel(t){if(x.panningModel=t,x.panningModel!==t&&"HRTF"===t)throw s()},get positionX(){return E.gain},get positionY(){return j.gain},get positionZ(){return M.gain},get refDistance(){return x.refDistance},set refDistance(t){if(t<0)throw new RangeError;x.refDistance=t},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;x.rolloffFactor=t},addEventListener:(...t)=>A.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>A.dispatchEvent(t[0]),removeEventListener:(...t)=>A.removeEventListener(t[0],t[1],t[2])};return u!==N.coneInnerAngle&&(N.coneInnerAngle=u),c!==N.coneOuterAngle&&(N.coneOuterAngle=c),l!==N.coneOuterGain&&(N.coneOuterGain=l),p!==N.distanceModel&&(N.distanceModel=p),h!==N.maxDistance&&(N.maxDistance=h),f!==N.orientationX.value&&(N.orientationX.value=f),d!==N.orientationY.value&&(N.orientationY.value=d),_!==N.orientationZ.value&&(N.orientationZ.value=_),y!==N.panningModel&&(N.panningModel=y),m!==N.positionX.value&&(N.positionX.value=m),v!==N.positionY.value&&(N.positionY.value=v),g!==N.positionZ.value&&(N.positionZ.value=g),b!==N.refDistance&&(N.refDistance=b),w!==N.rolloffFactor&&(N.rolloffFactor=w),$t(N,x)})(w,de,Le,Ue,en,hn,te),dn=((t,e)=>(n,o)=>{const r=t(n,t=>t.createPanner());return void 0===r.orientationX?e(n,o):(Ut(r,o),Qt(r,o,"orientationX"),Qt(r,o,"orientationY"),Qt(r,o,"orientationZ"),Qt(r,o,"positionX"),Qt(r,o,"positionY"),Qt(r,o,"positionZ"),zt(r,o,"coneInnerAngle"),zt(r,o,"coneOuterAngle"),zt(r,o,"coneOuterGain"),zt(r,o,"distanceModel"),zt(r,o,"maxDistance"),zt(r,o,"panningModel"),zt(r,o,"refDistance"),zt(r,o,"rolloffFactor"),r)})(de,fn),_n=((t,e,n,o,r)=>(class extends r{constructor(r,i=oe){const s=O(r),a={...oe,...i},u=e(s,a),c=o(s);super(r,"passive",u,c?n():null),this._nativePannerNode=u,this._orientationX=t(this,c,u.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=t(this,c,u.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=t(this,c,u.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=t(this,c,u.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=t(this,c,u.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=t(this,c,u.positionZ,34028234663852886e22,-34028234663852886e22)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}}))(Ie,dn,(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);const i=j(r,o);if(!i){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,orientationX:r.orientationX.value,orientationY:r.orientationY.value,orientationZ:r.orientationZ.value,panningModel:r.panningModel,positionX:r.positionX.value,positionY:r.positionY.value,positionZ:r.positionZ.value,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor};r=t(o,e)}return e.set(o,r),i?(await Y(n.context,o,n.orientationX),await Y(n.context,o,n.orientationY),await Y(n.context,o,n.orientationZ),await Y(n.context,o,n.positionX),await Y(n.context,o,n.positionY),await Y(n.context,o,n.positionZ)):(await Z(n.context,o,n.orientationX,r.orientationX),await Z(n.context,o,n.orientationY,r.orientationY),await Z(n.context,o,n.orientationZ,r.orientationZ),await Z(n.context,o,n.positionX,r.positionX),await Z(n.context,o,n.positionY,r.positionY),await Z(n.context,o,n.positionZ,r.positionZ)),void 0!==r.inputs?await R(n,o,r.inputs[0]):await R(n,o,r),r})(n,o)}}})(dn),pe,be),yn=((t,e)=>(class n{constructor(n,o){const r=O(n),i={...re,...o},s=t(r,i);return e.add(s),s}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===n.prototype||e.has(t)}}))((t=>(e,{disableNormalization:n,imag:o,real:r})=>{const i=t(e),s=new Float32Array(o),a=new Float32Array(r);return null!==i?i.createPeriodicWave(a,s,{disableNormalization:n}):e.createPeriodicWave(a,s,{disableNormalization:n})})(fe),g),mn=((t,e,n,o,r)=>{const i=new Float32Array([1,1]),s=Math.PI/2,a={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...a,oversample:"none"},c=(t,c,l,p,h)=>{if(1===c)return((t,e,r,c)=>{const l=new Float32Array(16385),p=new Float32Array(16385);for(let t=0;t<16385;t+=1){const e=t/16384*s;l[t]=Math.cos(e),p[t]=Math.sin(e)}const h=n(t,{...a,gain:0}),f=o(t,{...u,curve:l}),d=o(t,{...u,curve:i}),_=n(t,{...a,gain:0}),y=o(t,{...u,curve:p});return e.connect(h),e.connect(d.inputs[0]),e.connect(_),d.connect(r),r.connect(f.inputs[0]),r.connect(y.inputs[0]),f.connect(h.gain),y.connect(_.gain),h.connect(c,0,0),_.connect(c,0,1),[h,_]})(t,l,p,h);if(2===c)return((t,r,c,l)=>{const p=new Float32Array(16385),h=new Float32Array(16385),f=new Float32Array(16385),d=new Float32Array(16385),_=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>_){const e=(t-_)/(16384-_)*s;p[t]=Math.cos(e),h[t]=Math.sin(e),f[t]=0,d[t]=1}else{const e=t/(16384-_)*s;p[t]=1,h[t]=0,f[t]=Math.cos(e),d[t]=Math.sin(e)}const y=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),m=n(t,{...a,gain:0}),v=o(t,{...u,curve:p}),g=n(t,{...a,gain:0}),b=o(t,{...u,curve:h}),w=o(t,{...u,curve:i}),O=n(t,{...a,gain:0}),x=o(t,{...u,curve:f}),T=n(t,{...a,gain:0}),C=o(t,{...u,curve:d});return r.connect(y),r.connect(w.inputs[0]),y.connect(m,1),y.connect(g,1),y.connect(O,1),y.connect(T,1),w.connect(c),c.connect(v.inputs[0]),c.connect(b.inputs[0]),c.connect(x.inputs[0]),c.connect(C.inputs[0]),v.connect(m.gain),b.connect(g.gain),x.connect(O.gain),C.connect(T.gain),m.connect(l,0,0),O.connect(l,0,0),g.connect(l,0,1),T.connect(l,0,1),[m,O,g,T]})(t,l,p,h);throw r()};return(e,{channelCount:o,channelCountMode:i,pan:s,...a})=>{if("max"===i)throw r();const u=t(e,{...a,channelCount:1,channelCountMode:i,numberOfInputs:2}),l=n(e,{...a,channelCount:o,channelCountMode:i,gain:1}),p=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let h=c(e,o,l,p,u);return Object.defineProperty(p.gain,"defaultValue",{get:()=>0}),$t({get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount!==t&&(l.disconnect(),h.forEach(t=>t.disconnect()),h=c(e,t,l,p,u)),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw r();l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return p.gain},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2])},u)}})(Le,We,Ue,hn,te),vn=((t,e,n)=>(o,r)=>t(o,t=>{const i=r.channelCountMode;if("clamped-max"===i)throw n();if(void 0===o.createStereoPanner)return e(o,r);const s=t.createStereoPanner();return Ut(s,r),Qt(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw n()}}),s}))(de,mn,te),gn=((t,e,n,o,r)=>(class extends r{constructor(r,i=ie){const s=O(r),a={...ie,...i},u=e(s,a),c=o(s);super(r,"passive",u,c?n():null),this._pan=t(this,c,u.pan,1,-1)}get pan(){return this._pan}}))(Ie,vn,(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);const i=j(r,o);if(!i){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,pan:r.pan.value};r=t(o,e)}return e.set(o,r),i?await Y(n.context,o,n.pan):await Z(n.context,o,n.pan,r.pan),void 0!==r.inputs?await R(n,o,r.inputs[0]):await R(n,o,r),r})(n,o)}}})(vn),pe,be),bn=(t=>()=>{const e=new WeakMap;return{render(n,o){const r=e.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{let r=E(n);if(!j(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,curve:r.curve,oversample:r.oversample};r=t(o,e)}return e.set(o,r),void 0!==r.inputs?await R(n,o,r.inputs[0]):await R(n,o,r),r})(n,o)}}})(hn),wn=((t,e,n,o,r)=>(class extends r{constructor(t,r=ae){const i=O(t),s={...ae,...r},a=e(i,s);super(t,"passive",a,o(i)?n():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=a}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}}))(w,hn,bn,pe,be),On=(t=>null!==t&&t.isSecureContext)(ce),xn=(t=>(e,n)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e.currentTime*e.sampleRate)},currentTime:{configurable:!0,get:()=>e.currentTime}});try{return n()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(ce),Tn=On?((t,e,n,o,r,i,s)=>(a,u,c={credentials:"omit"})=>{const l=O(a),p=new URL(u,location.href).toString();if(void 0!==l.audioWorklet)return o(u).then(t=>{const[e,n]=C(t,p),o=new Blob([`${e};(registerProcessor=>{${n}\n})((n,p)=>registerProcessor(n,class extends p{constructor(o){const{hasNoOutput,...q}=o.parameterData;if(hasNoOutput===1){super({...o,numberOfOutputs:0,outputChannelCount:[],parameterData:q});this._h=true}else{super(o);this._h=false}}process(i,o,p){return super.process(i,(this._h)?[]:o,p)}}))`],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(o),s=r(l);return(null!==s?s:l).audioWorklet.addModule(i,c).then(()=>URL.revokeObjectURL(i)).catch(t=>{throw URL.revokeObjectURL(i),t})});const h=s.get(a);if(void 0!==h&&h.has(u))return Promise.resolve();const f=i.get(a);if(void 0!==f){const t=f.get(u);if(void 0!==t)return t}const d=o(u).then(t=>{const[e,n]=C(t,p);return(t=>new Promise((e,n)=>{const o=document.head;if(null===o)n(new SyntaxError);else{const r=document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),a=window.onerror,u=()=>{window.onerror=a,URL.revokeObjectURL(s)};window.onerror=(t,e,o,r,i)=>e===s||e===location.href&&1===o&&1===r?(u(),n(i),!1):null!==a?a(t,e,o,r,i):void 0,r.onerror=()=>{u(),n(new SyntaxError)},r.onload=()=>{u(),e()},r.src=s,r.type="module",o.appendChild(r)}}))(`${e};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${n}\n})})(window,'_AWGS')`)}).then(()=>{const t=window._AWGS.pop();if(void 0===t)throw new SyntaxError;n(l,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();const o=m.get(l);if(void 0!==o){if(o.has(t))throw e();S(n),A(n.parameterDescriptors),o.set(t,n)}else S(n),A(n.parameterDescriptors),m.set(l,new Map([[t,n]]))},l.sampleRate,void 0,void 0))}).catch(e=>{if("SyntaxError"===e.name)throw t();throw e});return void 0===f?i.set(a,new Map([[u,d]])):f.set(u,d),d.then(()=>{const t=s.get(a);void 0===t?s.set(a,new Set([u])):t.add(u)}).catch(()=>{}).then(()=>{const t=i.get(a);void 0!==t&&t.delete(u)}),d})(i,te,xn,(t=>async e=>{try{const t=await fetch(e);if(t.ok)return t.text()}catch(t){}throw t()})(i),fe,new WeakMap,new WeakMap):void 0,Cn=(t=>e=>null!==t&&e instanceof t)(he),An=((t,e)=>n=>t(n)||e(n))(Cn,pe),Sn=((t,e,n,o,r,i,s,a,u,c,l,p,h,f,d,_,y,m,v,g)=>(class extends d{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,o){return new n({length:e,numberOfChannels:t,sampleRate:o})}createBufferSource(){return new o(this)}createChannelMerger(t=6){return new i(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new s(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new u(this)}createDelay(t=1){return new l(this,{maxDelayTime:t})}createDynamicsCompressor(){return new p(this)}createGain(){return new h(this)}createIIRFilter(t,e){return new f(this,{feedback:e,feedforward:t})}createOscillator(){return new _(this)}createPanner(){return new y(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new m(this,{...n,imag:e,real:t})}createStereoPanner(){return new v(this)}createWaveShaper(){return new g(this)}decodeAudioData(t,e,n){return c(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t)).catch(t=>{throw"function"==typeof n&&n(t),t})}}))(Tn,we,Se,Re,qe,Be,ze,Xe,Ze,((t,e,n,o,r,i,s,a,u,c,l,p,h)=>(f,d)=>{const y=i(f)?f:O(f);if(_.has(d)){const t=n();return Promise.reject(t)}try{_.add(d)}catch(t){}if(e(c,()=>c(y))){return("closed"===y.state&&null!==r&&s(y)?new r(1,1,y.sampleRate):y).decodeAudioData(d).catch(t=>{if(t instanceof DOMException&&"NotSupportedError"===t.name)throw new TypeError;throw t}).then(n=>(e(u,()=>u(n))?e(a,()=>a(n))||p(n):(h(n),p(n)),t.add(n),n))}return new Promise((e,n)=>{const r=()=>{try{(t=>{const{port1:e}=new MessageChannel;e.postMessage(t,[t])})(d)}catch(t){}},i=t=>{n(t),r()};try{y.decodeAudioData(d,n=>{"function"!=typeof n.copyFromChannel&&(l(n),F(n)),t.add(n),r(),e(n)},t=>{i(null===t?o():t)})}catch(t){i(t)}})})(a,ue,()=>{try{return new DOMException("","DataCloneError")}catch(t){return t.code=25,t.name="DataCloneError",t}},()=>{try{return new DOMException("","EncodingError")}catch(t){return t.code=0,t.name="EncodingError",t}},le,An,pe,V,N,Bt,Te,Ce,Ae),$e,Ke,tn,sn,an,ln,_n,yn,gn,wn),kn=((t,e,n,o)=>(class extends o{constructor(o,r){const i=O(o);if(n(i))throw e();const s=t(i,r);super(o,"active",s,null),this._mediaElement=r.mediaElement,this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}}))((t=>(e,n)=>t(e,t=>t.createMediaElementSource(n.mediaElement)))(de),te,pe,be),Pn=((t,e,n,o)=>(class extends o{constructor(o,r){const i=O(o);if(n(i))throw e();const s=t(i,r);super(o,"active",s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}))(((t,e)=>(n,{mediaStream:o})=>{const r=o.getAudioTracks(),i=e(n,t=>{const e=r.sort((t,e)=>t.id<e.id?-1:t.id>e.id?1:0).slice(0,1);return t.createMediaStreamSource(new MediaStream(e))});if(0===r.length)throw t();return Object.defineProperty(i,"mediaStream",{value:o}),i})(w,de),te,pe,be),En=((t,e,n,o)=>(class extends o{constructor(o,r){const i=O(o);if(n(i))throw e();super(o,"active",t(i,r),null)}}))(((t,e)=>(n,{mediaStreamTrack:o})=>"function"==typeof n.createMediaStreamTrackSource?e(n,t=>t.createMediaStreamTrackSource(o)):e(n,e=>{const n=new MediaStream([o]),r=e.createMediaStreamSource(n);if("audio"!==o.kind)throw t();return r}))(w,de),te,pe,be),jn=((t,e,n,o,r,i,s,a)=>(class extends t{constructor(t={}){if(null===a)throw new Error("Missing the native AudioContext constructor.");const e=new a(t);if(null===e)throw o();if(!H(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,e.destination.channelCount);const{latencyHint:r}=t,{sampleRate:i}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===r?512/i:"interactive"===r||void 0===r?256/i:"playback"===r?1024/i:128*Math.max(2,Math.min(128,Math.round(r*i/128)))/i,this._nativeAudioContext=e,this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamSource(t){return new i(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new s(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}}))(Sn,w,te,se,kn,Pn,En,he),Mn=(t=>(e,n,o=0,r=0)=>{const i=e[o];if(void 0===i)throw t();return lt(n)?i.connect(n,0,r):i.connect(n,0)})(q),Dn=(t=>(e,n,o,r=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?Rt(t,e,n).disconnect():lt(n)?void 0===o?e.forEach(t=>t.disconnect(n)):void 0===r?Rt(t,e,o).disconnect(n,0):Rt(t,e,o).disconnect(n,0,r):void 0===o?e.forEach(t=>t.disconnect(n)):Rt(t,e,o).disconnect(n,0))(q),In=((t,e,n,o,r,i,s,a,u,c,l)=>(p,f,d,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw u();if(void 0!==_.outputChannelCount){if(_.outputChannelCount.length!==_.numberOfOutputs)throw e();if(_.outputChannelCount.some(t=>t<1))throw u()}if("explicit"!==_.channelCountMode)throw u();const y=_.channelCount*_.numberOfInputs,m=_.outputChannelCount.reduce((t,e)=>t+e,0),g=void 0===d.parameterDescriptors?0:d.parameterDescriptors.length;if(y+g>6||m>6)throw u();const b=new MessageChannel,w=[],O=[];for(let t=0;t<_.numberOfInputs;t+=1)w.push(s(p,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),O.push(r(p,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const x=[];if(void 0!==d.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:o}of d.parameterDescriptors){const r=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[o]?_.parameterData[o]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),x.push(r)}const T=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+g)}),C=Zt(f,p.sampleRate),A=a(p,C,y+g,Math.max(1,m)),S=r(p,{channelCount:Math.max(1,m),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,m)}),k=[];for(let t=0;t<_.numberOfOutputs;t+=1)k.push(o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_.outputChannelCount[t]}));for(let t=0;t<_.numberOfInputs;t+=1){w[t].connect(O[t]);for(let e=0;e<_.channelCount;e+=1)O[t].connect(T,e,t*_.channelCount+e)}const P=new Ot(void 0===d.parameterDescriptors?[]:d.parameterDescriptors.map(({name:t},e)=>{const n=x[e];return n.connect(T,0,y+e),n.start(0),[t,n.offset]}));T.connect(A),_.numberOfOutputs>0&&A.connect(S);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=k[t];for(let o=0;o<_.outputChannelCount[t];o+=1)S.connect(n,e+o,o);e+=_.outputChannelCount[t]}let E=_.channelInterpretation,j=null;const M=0===_.numberOfOutputs?[A]:k,D={get bufferSize(){return C},get channelCount(){return _.channelCount},set channelCount(t){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return E},set channelInterpretation(t){for(const e of w)e.channelInterpretation=t;E=t},get context(){return A.context},get inputs(){return w},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return j},set onprocessorerror(t){"function"==typeof j&&D.removeEventListener("processorerror",j),"function"==typeof(j="function"==typeof t?t:null)&&D.addEventListener("processorerror",j)},get parameters(){return P},get port(){return b.port2},addEventListener:(...t)=>A.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,M),disconnect:c.bind(null,M),dispatchEvent:(...t)=>A.dispatchEvent(t[0]),removeEventListener:(...t)=>A.removeEventListener(t[0],t[1],t[2])},I=new Map;b.port1.addEventListener=(t=>(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=I.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{l(p,()=>t(e))},I.set(t,e[1]))}}return t.call(b.port1,e[0],e[1],e[2])})(b.port1.addEventListener),b.port1.removeEventListener=(t=>(...e)=>{if("message"===e[0]){const t=I.get(e[1]);void 0!==t&&(I.delete(e[1]),e[1]=t)}return t.call(b.port1,e[0],e[1],e[2])})(b.port1.removeEventListener);let R=null;Object.defineProperty(b.port1,"onmessage",{get:()=>R,set:t=>{"function"==typeof R&&b.port1.removeEventListener("message",R),"function"==typeof(R="function"==typeof t?t:null)&&(b.port1.addEventListener("message",R),b.port1.start())}}),d.prototype.port=b.port1;let V=null;((t,e,n,o)=>{let r=v.get(t);void 0===r&&(r=new WeakMap,v.set(t,r));const i=Ht(n,o);return r.set(e,i),i})(p,D,d,_).then(t=>V=t);const N=St(_.numberOfInputs,_.channelCount),q=St(_.numberOfOutputs,_.outputChannelCount),F=void 0===d.parameterDescriptors?[]:d.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{});let L=!0;return A.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==V)for(let n=0;n<C;n+=128){for(let e=0;e<_.numberOfInputs;e+=1)for(let o=0;o<_.channelCount;o+=1)Ct(t,N[e],o,o,n);void 0!==d.parameterDescriptors&&d.parameterDescriptors.forEach(({name:e},o)=>{Ct(t,F,e,y+o,n)});for(let t=0;t<_.numberOfInputs;t+=1)for(let e=0;e<_.outputChannelCount[t];e+=1)0===q[t][e].byteLength&&(q[t][e]=new Float32Array(128));try{const t=N.map((t,e)=>{const n=h.get(D);return void 0===n||void 0===n.get(e)?[new Float32Array(0)]:t}),o=l(p,()=>V.process(t,q,F));L=o;for(let t=0,o=0;t<_.numberOfOutputs;t+=1){for(let r=0;r<_.outputChannelCount[t];r+=1)At(e,q[t],r,o+r,n);o+=_.outputChannelCount[t]}}catch(t){L=!1,D.dispatchEvent(new ErrorEvent("processorerror",{error:t}))}if(!L){A.onaudioprocess=null;break}}},D})(Mn,q,w,Le,We,Qe,Ue,en,te,Dn,xn),Rn=((t,e,n,o,r)=>(i,s,a,u,c,l)=>{if(null!==a)try{const n=e(i,t=>r(t)&&0!==l.numberOfInputs&&0===l.numberOfOutputs?new a(t,u,{...l,numberOfOutputs:1,outputChannelCount:[1],parameterData:{...l.parameterData,hasNoOutput:1}}):new a(t,u,l)),s=new Map;let c=null;return Object.defineProperties(n,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>c,set:t=>{"function"==typeof c&&n.removeEventListener("processorerror",c),"function"==typeof(c="function"==typeof t?t:null)&&n.addEventListener("processorerror",c)}}}),n.addEventListener=(t=>(...e)=>{if("processorerror"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=s.get(e[1]);void 0!==n?e[1]=n:(e[1]=n=>{t(new ErrorEvent(e[0],{...n,error:new Error}))},s.set(t,e[1]))}}return t.call(n,e[0],e[1],e[2])})(n.addEventListener),n.removeEventListener=(t=>(...e)=>{if("processorerror"===e[0]){const t=s.get(e[1]);void 0!==t&&(s.delete(e[1]),e[1]=t)}return t.call(n,e[0],e[1],e[2])})(n.removeEventListener),n}catch(t){if(11===t.code)throw o();throw t}if(void 0===c)throw o();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(l),n(i,s,c,l)})(w,de,In,te,pe),Vn=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(ce),Nn=((t,e,n,o,r,i,s,a,u,c)=>(l,p,h)=>{const f=new WeakMap;return{render(d,_){const y=f.get(_);if(void 0!==y){const t=Array.isArray(y)?y[2]:y;return Promise.resolve(t)}return(async(d,_)=>{let y=E(d),m=null;const v=j(y,_);if(null===a){const e=p.outputChannelCount.reduce((t,e)=>t+e,0),r=o(_,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let t=0;t<d.numberOfOutputs;t+=1)a.push(n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:p.outputChannelCount[t]}));const u=0===p.numberOfOutputs?[r]:a,c=i(_,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1});c.connect=t.bind(null,u),c.disconnect=s.bind(null,u),m=[r,a,c]}else v||(y=new a(_,l));if(f.set(_,null===m?y:m),null!==m){const[t,s,a]=m;if(void 0===h)throw new Error("Missing the processor constructor.");if(null===u)throw new Error("Missing the native OfflineAudioContext constructor.");const l=d.channelCount*d.numberOfInputs,f=void 0===h.parameterDescriptors?0:h.parameterDescriptors.length,y=new u(l+f,128*Math.ceil(d.context.length/128),_.sampleRate),v=[],g=[];for(let t=0;t<p.numberOfInputs;t+=1)v.push(i(y,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),g.push(o(y,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const b=await Promise.all(Array.from(d.parameters.values()).map(async t=>{const e=r(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await Z(d.context,y,t,e.offset),e})),w=n(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,l+f)});for(let t=0;t<p.numberOfInputs;t+=1){v[t].connect(g[t]);for(let e=0;e<p.channelCount;e+=1)g[t].connect(w,e,t*p.channelCount+e)}for(const[t,e]of b.entries())e.connect(w,0,l+t),e.start(0);return w.connect(y.destination),Promise.all(v.map(t=>R(d,y,t))).then(()=>c(y)).then(async n=>{const o=e(_),r=await kt(d,n,_,p,h);null!==r&&(o.buffer=r,o.start(0)),o.connect(t);for(let e=0,n=0;e<d.numberOfOutputs;e+=1){const o=s[e];for(let r=0;r<p.outputChannelCount[e];r+=1)t.connect(o,n+r,r);n+=p.outputChannelCount[e]}return a})}if(v)for(const[t,e]of d.parameters.entries())await Y(d.context,_,e,y.parameters.get(t));else for(const[t,e]of d.parameters.entries())await Z(d.context,_,e,y.parameters.get(t));return await R(d,_,y),y})(d,_)}}})(Mn,Me,Le,We,Qe,Ue,Dn,Vn,le,on),qn=On?((t,e,n,o,r,i,s)=>(class extends s{constructor(s,a,u=xt){const c=O(s),l=r(c),p=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Tt(t.numberOfOutputs)}))({...xt,...u}),h=m.get(c),f=void 0===h?void 0:h.get(a),d=n(c,l?null:s.baseLatency,i,a,f,p);super(s,"active",d,l?e(a,p,f):null);const _=[];if(d.parameters.forEach((e,n)=>{const o=t(this,l,e);_.push([n,o])}),this._nativeAudioWorkletNode=d,this._numberOfOutputs=0===u.numberOfOutputs?0:this._nativeAudioWorkletNode.numberOfOutputs,this._onprocessorerror=null,this._parameters=new Ot(_),"closed"!==s.state){const t=new o(s,{gain:0});try{this.connect(t).connect(s.destination)}catch(t){if("IndexSizeError"!==t.name)throw t}}}get numberOfOutputs(){return this._numberOfOutputs}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e=z(this,t);this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}}))(Ie,Nn,Rn,tn,pe,Vn,be):void 0,Fn=(((t,e,n,o,r)=>(class extends o{constructor(t={}){if(null===r)throw new Error("Missing the native AudioContext constructor.");const o=new r(t);if(null===o)throw n();if(!H(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&o.sampleRate!==t.sampleRate)throw e();super(o,o.destination.channelCount);const{latencyHint:i}=t,{sampleRate:s}=o;if(this._baseLatency="number"==typeof o.baseLatency?o.baseLatency:"balanced"===i?512/s:"interactive"===i||void 0===i?256/s:"playback"===i?1024/s:128*Math.max(2,Math.min(128,Math.round(i*s/128)))/s,this._nativeAudioContext=o,this._state=null,"running"===o.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),o.removeEventListener("statechange",t)};o.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}}))(w,te,se,an,he),((t,e)=>(n,o,r)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,o,r)}catch(e){if("IndexSizeError"===e.name||"SyntaxError"===e.name)throw t();throw e}})(te,le)),Ln=((t,e,n,o,r,i,s,a)=>(u,c)=>I(u).render(u,c).then(()=>n(c)).then(n=>("function"!=typeof n.copyFromChannel?(i(n),F(n)):e(r,()=>r(n))?e(o,()=>o(n))||s(n):(a(n),s(n)),t.add(n),n)))(a,ue,on,V,N,Te,Ce,Ae),Bn=(((t,e,n,o,r)=>(class extends o{constructor(e){const{length:o,numberOfChannels:r,sampleRate:i}={...Wt,...e},s=n(r,o,i);t(Bt,()=>Bt(s))||s.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(s.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(s,r),this._length=o,this._nativeOfflineAudioContext=s,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).then(t=>(this._state=null,t)).catch(t=>{throw this._state=null,t}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}}))(ue,w,Fn,an,Ln),((t,e,n,o,r)=>(class extends t{constructor(t,n,r){let i;if("number"==typeof t&&void 0!==n&&void 0!==r)i={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");i=t}const{length:s,numberOfChannels:a,sampleRate:u}={...ee,...i},c=o(a,s,u);e(Bt,()=>Bt(c))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,a),this._length=s,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).then(t=>(this._state=null,t)).catch(t=>{throw this._state=null,t}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}}))(Sn,ue,w,Fn,Ln)),Wn=((t,e)=>n=>{const o=t.get(n);return e(o)||e(n)})(d,Cn),zn=((t,e)=>n=>t.has(n)||e(n))(u,me),Un=((t,e)=>n=>t.has(n)||e(n))(l,ve),Gn=((t,e)=>n=>{const o=t.get(n);return e(o)||e(n)})(d,pe);var Qn=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Xn=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qn(arguments[e]));return t};function Yn(t,e){if(!t)throw new Error(e)}var Zn=console;function Hn(t){Zn=t}function $n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Zn.log.apply(Zn,Xn(t))}function Jn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Zn.warn.apply(Zn,Xn(t))}function Kn(t){return void 0===t}function to(t){return!Kn(t)}function eo(t){return"function"==typeof t}function no(t){return"number"==typeof t}function oo(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function ro(t){return"boolean"==typeof t}function io(t){return Array.isArray(t)}function so(t){return"string"==typeof t}function ao(t){return so(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}var uo,co="object"==typeof self?self:null,lo=co&&(co.hasOwnProperty("AudioContext")||co.hasOwnProperty("webkitAudioContext"));function po(){var t;return!uo&&lo&&(t=new jn,uo=t,co&&(co.TONE_AUDIO_CONTEXT=uo)),uo}co&&co.TONE_AUDIO_CONTEXT&&(uo=co.TONE_AUDIO_CONTEXT);var ho=function(){function t(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}return t.prototype._createWorker=function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t"],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},t.prototype._createTimeout=function(){var t=this;this._timeout=setTimeout(function(){t._createTimeout(),t._callback()},1e3*this._updateInterval)},t.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},t.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disposeClock()},t}();function fo(t){return Un(t)}function _o(t){return zn(t)}function yo(t){return Gn(t)}function mo(t){return Wn(t)}function vo(t){return t instanceof AudioBuffer}var go=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},bo=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(go(arguments[e]));return t};function wo(t,e){return"value"===t||fo(e)||_o(e)||vo(e)}function Oo(t){for(var e,n,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];if(!o.length)return t;var i=o.shift();if(oo(t)&&oo(i))for(var s in i)wo(s,i[s])?t[s]=i[s]:oo(i[s])?(t[s]||Object.assign(t,((e={})[s]={},e)),Oo(t[s],i[s])):Object.assign(t,((n={})[s]=i[s],n));return Oo.apply(void 0,bo([t],o))}function xo(t,e,n,o){var r;void 0===n&&(n=[]);var i={},s=Array.from(e);oo(s[0])&&o&&!Reflect.has(s[0],o)&&(Object.keys(s[0]).some(function(e){return Reflect.has(t,e)})||(Oo(i,((r={})[o]=s[0],r)),n.splice(n.indexOf(o),1),s.shift()));if(1===s.length&&oo(s[0]))Oo(i,s[0]);else for(var a=0;a<n.length;a++)to(s[a])&&(i[n[a]]=s[a]);return Oo(t,i)}function To(t,e){return Kn(t)?e:t}function Co(t,e){return e.forEach(function(e){Reflect.has(t,e)&&delete t[e]}),t}var Ao,So=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},ko=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(So(arguments[e]));return t},Po=function(){function t(){this.debug=!1,this._wasDisposed=!1}return t.getDefaults=function(){return{}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(this.debug||co&&this.toString()===co.TONE_DEBUG_CLASS)&&$n.apply(void 0,ko([this],t))},t.prototype.assert=function(t,e){Yn(t,e)},t.prototype.dispose=function(){return this._wasDisposed=!0,this},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.name},t.version="14.4.6",t}(),Eo=(Ao=function(t,e){return(Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ao(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),jo=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Mo=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jo(arguments[e]));return t},Do=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Emitter",e}return Eo(e,t),e.prototype.on=function(t,e){var n=this;return t.split(/\W+/).forEach(function(t){Kn(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)}),this},e.prototype.once=function(t,e){var n=this,o=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];e.apply(void 0,Mo(r)),n.off(t,o)};return this.on(t,o),this},e.prototype.off=function(t,e){var n=this;return t.split(/\W+/).forEach(function(o){if(Kn(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(Kn(e))n._events[t]=[];else for(var r=n._events[t],i=0;i<r.length;i++)r[i]===e&&r.splice(i,1)}),this},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(t))for(var o=this._events[t].slice(0),r=0,i=o.length;r<i;r++)o[r].apply(this,e);return this},e.mixin=function(t){["on","once","off","emit"].forEach(function(n){var o=Object.getOwnPropertyDescriptor(e.prototype,n);Object.defineProperty(t.prototype,n,o)})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=void 0,this},e}(Po),Io=1e-6;function Ro(t,e){return t>e+Io}function Vo(t,e){return t+Io<e}function No(t,e){return Math.abs(t-e)<Io}var qo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fo=function(t){function e(){var n=t.call(this)||this;n.name="Timeline",n._timeline=[],n._epsilon=1e-6;var o=xo(e.getDefaults(),arguments,["memory"]);return n.memory=o.memory,n.increasing=o.increasing,n}return qo(e,t),e.getDefaults=function(){return{memory:1/0,increasing:!1}},Object.defineProperty(e.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){if(this.assert(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];this.assert(e.time<=t.time,"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var o=this.length-this.memory;this._timeline.splice(0,o)}return this},e.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},e.prototype.get=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},e.prototype.peek=function(){return this._timeline[0]},e.prototype.shift=function(){return this._timeline.shift()},e.prototype.getAfter=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},e.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null},e.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},e.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},e.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},e.prototype._eq=function(t,e){return Math.abs(t-e)<this._epsilon},e.prototype._gt=function(t,e){return t>e+this._epsilon},e.prototype._lt=function(t,e){return t<e+this._epsilon},e.prototype._search=function(t,e){if(void 0===e&&(e="time"),0===this._timeline.length)return-1;var n=0,o=this._timeline.length,r=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;n<r;){var i=Math.floor(n+(r-n)/2),s=this._timeline[i],a=this._timeline[i+1];if(No(s[e],t)){for(var u=i;u<this._timeline.length;u++){No(this._timeline[u][e],t)&&(i=u)}return i}if(Vo(s[e],t)&&Ro(a[e],t))return i;Ro(s[e],t)?r=i:n=i+1}return-1},e.prototype._iterate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._timeline.length-1),this._timeline.slice(e,n+1).forEach(t)},e.prototype.forEach=function(t){return this._iterate(t),this},e.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},e.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},e.prototype.forEachBetween=function(t,e,n){var o=this._search(t),r=this._search(e);return-1!==o&&-1!==r?(this._timeline[o].time!==t&&(o+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,o,r)):-1===o&&this._iterate(n,0,r),this},e.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},e.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e(n)},0,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=[],this},e}(Po),Lo=[];function Bo(t){Lo.push(t)}var Wo=[];function zo(t){Wo.push(t)}var Uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Go=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Qo=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Xo=function(t){function e(){var n=t.call(this)||this;n.name="Context",n._constants=new Map,n._timeouts=new Fo,n._timeoutIds=0,n._initialized=!1,n._workletModules=new Map;var o=xo(e.getDefaults(),arguments,["context"]);return n._context=o.context,n._latencyHint=o.latencyHint,n.lookAhead=o.lookAhead,n._ticker=new ho(n.emit.bind(n,"tick"),o.clockSource,o.updateInterval),n.on("tick",n._timeoutLoop.bind(n)),n._context.onstatechange=function(){n.emit("statechange",n.state)},n}return Uo(e,t),e.getDefaults=function(){return{clockSource:"worker",context:po(),latencyHint:"interactive",lookAhead:.1,updateInterval:.03}},e.prototype.initialize=function(){var t;return this._initialized||(t=this,Lo.forEach(function(e){return e(t)}),this._initialized=!0),this},e.prototype.createAnalyser=function(){return this._context.createAnalyser()},e.prototype.createOscillator=function(){return this._context.createOscillator()},e.prototype.createBufferSource=function(){return this._context.createBufferSource()},e.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},e.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},e.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},e.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},e.prototype.createConstantSource=function(){return this._context.createConstantSource()},e.prototype.createConvolver=function(){return this._context.createConvolver()},e.prototype.createDelay=function(t){return this._context.createDelay(t)},e.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},e.prototype.createGain=function(){return this._context.createGain()},e.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},e.prototype.createPanner=function(){return this._context.createPanner()},e.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},e.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},e.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},e.prototype.createMediaStreamSource=function(t){return this.assert(mo(this._context),"Only available on online audio context"),this._context.createMediaStreamSource(t)},e.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this._context.listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._transport},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._destination},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),e.prototype.createAudioWorkletNode=function(t,e){return function(t,e,n){return Yn(to(qn),"This node only works in a secure context (https or localhost)"),new qn(t,e,n)}(this.rawContext,t,e)},e.prototype.addAudioWorkletModule=function(t,e){return Go(this,void 0,void 0,function(){return Qo(this,function(n){switch(n.label){case 0:return this.assert(to(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),[4,this._workletModules.get(e)];case 1:return n.sent(),[2]}})})},e.prototype.workletsAreReady=function(){return Go(this,void 0,void 0,function(){var t;return Qo(this,function(e){switch(e.label){case 0:return t=[],this._workletModules.forEach(function(e){return t.push(e)}),[4,Promise.all(t)];case 1:return e.sent(),[2]}})})},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,so(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.now=function(){return this._context.currentTime+this.lookAhead},e.prototype.resume=function(){return"suspended"===this._context.state&&mo(this._context)?this._context.resume():Promise.resolve()},e.prototype.close=function(){return Go(this,void 0,void 0,function(){return Qo(this,function(t){switch(t.label){case 0:return mo(this._context)?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._initialized&&(e=this,Wo.forEach(function(t){return t(e)})),[2]}var e})})},e.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),o=0;o<n.length;o++)n[o]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r},e.prototype.dispose=function(){var e=this;return t.prototype.dispose.call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(t){return e._constants[t].disconnect()}),this},e.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},e.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},e.prototype.clearTimeout=function(t){var e=this;return this._timeouts.forEach(function(n){n.id===t&&e._timeouts.remove(n)}),this},e.prototype.clearInterval=function(t){return this.clearTimeout(t)},e.prototype.setInterval=function(t,e){var n=this,o=++this._timeoutIds,r=function(){var i=n.now();n._timeouts.add({callback:function(){t(),r()},id:o,time:i+e})};return r(),o},e}(Do),Yo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zo=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Ho=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},$o=function(t){function e(){var e,n,o,r=t.call(this,{clockSource:"offline",context:yo(arguments[0])?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],o=arguments[2],new Bn(e,n,o)),lookAhead:0,updateInterval:yo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})||this;return r.name="OfflineContext",r._currentTime=0,r._duration=yo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],r}return Yo(e,t),e.prototype.now=function(){return this._currentTime},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),e.prototype._renderClock=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=128/this.sampleRate},e.prototype.render=function(){return Zo(this,void 0,void 0,function(){return Ho(this,function(t){switch(t.label){case 0:return[4,this.workletsAreReady()];case 1:return t.sent(),this._renderClock(),[2,this._context.startRendering()]}})})},e.prototype.close=function(){return Promise.resolve()},e}(Xo),Jo={destination:{},transport:{}},Ko=Jo;function tr(){return Ko===Jo&&lo&&er(new Xo),Ko}function er(t){(Ko=mo(t)?new Xo(t):yo(t)?new $o(t):t).initialize()}function nr(){return Ko.resume()}if(co&&!co.TONE_SILENCE_LOGGING){var or="v";0;var rr=" * Tone.js "+or+"14.4.6 * ";}function ir(t){return Math.pow(10,t/20)}function sr(t){return Math.log(t)/Math.LN10*20}function ar(t){return Math.pow(2,t/12)}var ur=440;function cr(t){return Math.round(function(t){return 69+12*Math.log2(t/ur)}(t))}function lr(t){return ur*Math.pow(2,(t-69)/12)}var pr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hr=function(t){function e(e,n,o){var r=t.call(this)||this;return r.defaultUnits="s",r._val=n,r._units=o,r.context=e,r._expressions=r._getExpressions(),r}return pr(e,t),e.prototype._getExpressions=function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var o=parseInt(e,10),r="."===n?1.5:1;return 1===o?t._beatsToUnits(t._getTimeSignature())*r:t._beatsToUnits(4/o)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,o){var r=0;return e&&"0"!==e&&(r+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(r+=t._beatsToUnits(parseFloat(n))),o&&"0"!==o&&(r+=t._beatsToUnits(parseFloat(o)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},e.prototype.valueOf=function(){if(this._val instanceof e&&this.fromType(this._val),Kn(this._val))return this._noArg();if(so(this._val)&&Kn(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(oo(this._val)){var n=0;for(var o in this._val)if(to(this._val[o])){var r=this._val[o];n+=new this.constructor(this.context,o).valueOf()*r}return n}if(to(this._units)){var i=this._expressions[this._units],s=this._val.toString().trim().match(i.regexp);return s?i.method.apply(this,s.slice(1)):i.method.call(this,this._val)}return so(this._val)?parseFloat(this._val):this._val},e.prototype._frequencyToUnits=function(t){return 1/t},e.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},e.prototype._secondsToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},e.prototype._noArg=function(){return this._now()},e.prototype._getBpm=function(){return this.context.transport.bpm.value},e.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},e.prototype._getPPQ=function(){return this.context.transport.PPQ},e.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this},e.prototype.toFrequency=function(){return 1/this.toSeconds()},e.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e}(Po),fr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Time",e}return fr(e,t),e.prototype._getExpressions=function(){var n=this;return Object.assign(t.prototype._getExpressions.call(this),{now:{method:function(t){return n._now()+new n.constructor(n.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var o=new e(n.context,t).valueOf();return n._secondsToUnits(n.context.transport.nextSubdivision(o))},regexp:/^@(.+)/}})},e.prototype.quantize=function(t,e){void 0===e&&(e=1);var n=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/n)*n-o)*e},e.prototype.toNotation=function(){for(var t=this,n=this.toSeconds(),o=["1m"],r=1;r<9;r++){var i=Math.pow(2,r);o.push(i+"n."),o.push(i+"n"),o.push(i+"t")}o.push("0");var s=o[0],a=new e(this.context,o[0]).toSeconds();return o.forEach(function(o){var r=new e(t.context,o).toSeconds();Math.abs(r-n)<Math.abs(a-n)&&(s=o,a=r)}),s},e.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),o=e%1*4;e=Math.floor(e)%this._getTimeSignature();var r=o.toString();return r.length>3&&(o=parseFloat(parseFloat(r).toFixed(3))),[n,e,o].join(":")},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},e.prototype.toSeconds=function(){return this.valueOf()},e.prototype.toMidi=function(){return cr(this.toFrequency())},e.prototype._now=function(){return this.context.now()},e}(hr);function _r(t,e){return new dr(tr(),t,e)}var yr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Frequency",e.defaultUnits="hz",e}return yr(e,t),Object.defineProperty(e,"A4",{get:function(){return ur},set:function(t){!function(t){ur=t}(t)},enumerable:!0,configurable:!0}),e.prototype._getExpressions=function(){return Object.assign({},t.prototype._getExpressions.call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:e.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var o=vr[t.toLowerCase()]+12*(parseInt(n,10)+1);return"midi"===this.defaultUnits?o:e.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(o*=this._beatsToUnits(parseFloat(n)/4)),o}}})},e.prototype.transpose=function(t){return new e(this.context,this.valueOf()*ar(t))},e.prototype.harmonize=function(t){var e=this;return t.map(function(t){return e.transpose(t)})},e.prototype.toMidi=function(){return cr(this.valueOf())},e.prototype.toNote=function(){var t=this.toFrequency(),n=Math.log2(t/e.A4),o=Math.round(12*n)+57,r=Math.floor(o/12);return r<0&&(o+=-12*r),gr[o%12]+r.toString()},e.prototype.toSeconds=function(){return 1/t.prototype.toSeconds.call(this)},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},e.prototype._noArg=function(){return 0},e.prototype._frequencyToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},e.prototype._beatsToUnits=function(e){return 1/t.prototype._beatsToUnits.call(this,e)},e.prototype._secondsToUnits=function(t){return 1/t},e.mtof=function(t){return lr(t)},e.ftom=function(t){return cr(t)},e}(dr),vr={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},gr=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function br(t,e){return new mr(tr(),t,e)}var wr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Or=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TransportTime",e}return wr(e,t),e.prototype._now=function(){return this.context.transport.seconds},e}(dr);function xr(t,e){return new Or(tr(),t,e)}var Tr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cr=function(t){function e(){var n=t.call(this)||this,o=xo(e.getDefaults(),arguments,["context"]);return n.defaultContext?n.context=n.defaultContext:n.context=o.context,n}return Tr(e,t),e.getDefaults=function(){return{context:tr()}},e.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},e.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),e.prototype.toSeconds=function(t){return new dr(this.context,t).toSeconds()},e.prototype.toFrequency=function(t){return new mr(this.context,t).toFrequency()},e.prototype.toTicks=function(t){return new Or(this.context,t).toTicks()},e.prototype._getPartialProperties=function(t){var e=this.get();return Object.keys(e).forEach(function(n){Kn(t[n])&&delete e[n]}),e},e.prototype.get=function(){var t=this,n=this.constructor.getDefaults();return Object.keys(n).forEach(function(o){if(Reflect.has(t,o)){var r=t[o];to(r)&&to(r.value)&&to(r.setValueAtTime)?n[o]=r.value:r instanceof e?n[o]=r._getPartialProperties(n[o]):io(r)||no(r)||so(r)||ro(r)?n[o]=r:delete n[o]}}),n},e.prototype.set=function(t){var n=this;return Object.keys(t).forEach(function(o){Reflect.has(n,o)&&to(n[o])&&(n[o]&&to(n[o].value)&&to(n[o].setValueAtTime)?n[o].value!==t[o]&&(n[o].value=t[o]):n[o]instanceof e?n[o].set(t[o]):n[o]=t[o])}),this},e}(Po),Ar=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sr=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["param","units","convert"]))||this;n.name="Param",n.overridden=!1,n._minOutput=1e-7;var o=xo(e.getDefaults(),arguments,["param","units","convert"]);for(n.assert(to(o.param)&&(fo(o.param)||o.param instanceof e),"param must be an AudioParam");!fo(o.param);)o.param=o.param._param;return n._swappable=!!to(o.swappable)&&o.swappable,n._swappable?(n.input=n.context.createGain(),n._param=o.param,n.input.connect(n._param)):n._param=n.input=o.param,n._events=new Fo(1e3),n._initialValue=n._param.defaultValue,n.units=o.units,n.convert=o.convert,n._minValue=o.minValue,n._maxValue=o.maxValue,to(o.value)&&o.value!==n._toType(n._initialValue)&&n.setValueAtTime(o.value,0),n}return Ar(e,t),e.getDefaults=function(){return Object.assign(Cr.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this._initialValue=this._fromType(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return to(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return to(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),e.prototype._is=function(t,e){return this.units===e},e.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?ir(t):this._is(t,"frequency")?this.toFrequency(t):this._is(t,"normalRange")?Math.min(Math.max(t,0),1):this._is(t,"audioRange")?Math.min(Math.max(t,-1),1):this._is(t,"positive")?Math.max(t,0):(this._is(t,"number"),t):t},e.prototype._toType=function(t){return this.convert&&"decibels"===this.units?sr(t):t},e.prototype.setValueAtTime=function(t,e){var n=this.toSeconds(e),o=this._fromType(t);return this.assert(isFinite(o)&&isFinite(n),"Invalid argument(s) to setValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,n),this},e.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),o=this._events.get(e),r=this._initialValue;if(null===o)r=this._initialValue;else if("setTargetAtTime"!==o.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=o.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var i=o.value;if("setTargetAtTime"===o.type)i=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value;r="linearRampToValueAtTime"===n.type?this._linearInterpolate(o.time,i,n.time,n.value,e):this._exponentialInterpolate(o.time,i,n.time,n.value,e)}else r=o.value;else{var s,a=void 0;a=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value,"setTargetAtTime"===o.type&&(r=this._exponentialApproach(o.time,a,o.value,o.constant,e))}return this._toType(r)},e.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},e.prototype.linearRampToValueAtTime=function(t,e){var n=this._fromType(t),o=this.toSeconds(e);return this.assert(isFinite(n)&&isFinite(o),"Invalid argument(s) to linearRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:o,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(n,o),this},e.prototype.exponentialRampToValueAtTime=function(t,e){var n=this._fromType(t);n=Math.max(this._minOutput,n);var o=this.toSeconds(e);return this.assert(isFinite(n)&&isFinite(o),"Invalid argument(s) to exponentialRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(n,o),this},e.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var o=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this},e.prototype.setTargetAtTime=function(t,e,n){var o=this._fromType(t);this.assert(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var r=this.toSeconds(e);return this.assert(isFinite(o)&&isFinite(r),"Invalid argument(s) to setTargetAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(o,r,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,o){void 0===o&&(o=1),n=this.toSeconds(n),e=this.toSeconds(e);var r=this._fromType(t[0])*o;this.setValueAtTime(this._toType(r),e);for(var i=n/(t.length-1),s=1;s<t.length;s++){var a=this._fromType(t[s])*o;this.linearRampToValueAtTime(this._toType(a),e+s*i)}return this},e.prototype.cancelScheduledValues=function(t){var e=this.toSeconds(t);return this.assert(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this},e.prototype.cancelAndHoldAtTime=function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));this.assert(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n),this._param.cancelScheduledValues(e);var o=this._events.get(e),r=this._events.getAfter(e);return o&&o.time===e?r?this._events.cancel(r.time):this._events.cancel(e+this.sampleTime):r&&(this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this},e.prototype.rampTo=function(t,e,n){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},e.prototype.apply=function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var o=this._events.getAfter(n.time),r=o?o.time:e+2,i=(r-e)/10,s=e;s<r;s+=i)t.linearRampToValueAtTime(this.getValueAtTime(s),s);return this._events.forEachAfter(this.context.currentTime,function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this},e.prototype.setParam=function(t){this.assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),this},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this._toType(this._param.defaultValue)},enumerable:!0,configurable:!0}),e.prototype._exponentialApproach=function(t,e,n,o,r){return n+(e-n)*Math.exp(-(r-t)/o)},e.prototype._linearInterpolate=function(t,e,n,o,r){return e+(r-t)/(n-t)*(o-e)},e.prototype._exponentialInterpolate=function(t,e,n,o,r){return e*Math.pow(o/e,(r-t)/(n-t))},e}(Cr),kr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Er=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pr(arguments[e]));return t},jr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioNode",e._internalChannels=[],e}return kr(e,t),Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return to(this.input)?fo(this.input)||this.input instanceof Sr?1:this.input.numberOfInputs:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return to(this.output)?this.output.numberOfOutputs:0},enumerable:!0,configurable:!0}),e.prototype._isAudioNode=function(t){return to(t)&&(t instanceof e||_o(t))},e.prototype._getInternalNodes=function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t},e.prototype._setChannelProperties=function(t){this._getInternalNodes().forEach(function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})},e.prototype._getChannelProperties=function(){var t=this._getInternalNodes();this.assert(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}},Object.defineProperty(e.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Dr(this,t,e,n),this},e.prototype.toDestination=function(){return this.connect(this.context.destination),this},e.prototype.toMaster=function(){return Jn("toMaster() has been renamed toDestination()"),this.toDestination()},e.prototype.disconnect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Ir(this,t,e,n),this},e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mr.apply(void 0,Er([this],t)),this},e.prototype.fan=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){return t.connect(e)}),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),to(this.input)&&(this.input instanceof e?this.input.dispose():_o(this.input)&&this.input.disconnect()),to(this.output)&&(this.output instanceof e?this.output.dispose():_o(this.output)&&this.output.disconnect()),this._internalChannels=[],this},e}(Cr);function Mr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();t.reduce(function(t,e){return t instanceof jr?t.connect(e):_o(t)&&Dr(t,e),e},n)}function Dr(t,e,n,o){for(void 0===n&&(n=0),void 0===o&&(o=0),Yn(to(t),"Cannot connect from undefined node"),Yn(to(e),"Cannot connect to undefined node"),(e instanceof jr||_o(e))&&Yn(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Yn(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof jr||e instanceof Sr;)to(e.input)&&(e=e.input);for(;t instanceof jr;)to(t.output)&&(t=t.output);fo(e)?t.connect(e,n):t.connect(e,n,o)}function Ir(t,e,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),to(e))for(;e instanceof jr;)e.input&&(e=e.input);for(;!_o(t);)to(t.output)&&(t=t.output);fo(e)?t.disconnect(e,n):_o(e)?t.disconnect(e,n,o):t.disconnect()}function Rr(t,e){io(e)?e.forEach(function(e){return Rr(t,e)}):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Vr(t,e){io(e)?e.forEach(function(e){return Vr(t,e)}):Object.defineProperty(t,e,{writable:!0})}var Nr=function(){},qr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fr=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["gain","units"]))||this;n.name="Gain",n._gainNode=n.context.createGain(),n.input=n._gainNode,n.output=n._gainNode;var o=xo(e.getDefaults(),arguments,["gain","units"]);return n.gain=new Sr({context:n.context,convert:o.convert,param:n._gainNode.gain,units:o.units,value:o.gain}),Rr(n,"gain"),n}return qr(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{convert:!0,gain:1,units:"gain"})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},e}(jr),Lr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Br=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Wr=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},zr=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Ur=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffer",n.onload=Nr;var o=xo(e.getDefaults(),arguments,["url","onload","onerror"]);return n.reverse=o.reverse,n.onload=o.onload,o.url&&vo(o.url)||o.url instanceof e?n.set(o.url):so(o.url)&&n.load(o.url).catch(o.onerror),n}return Lr(e,t),e.getDefaults=function(){return{onerror:Nr,onload:Nr,reverse:!1}},Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:tr().sampleRate},enumerable:!0,configurable:!0}),e.prototype.set=function(t){var n=this;return t instanceof e?t.loaded?this._buffer=t.get():t.onload=function(){n.set(t),n.onload(n)}:this._buffer=t,this._reversed&&this._reverse(),this},e.prototype.get=function(){return this._buffer},e.prototype.load=function(t){return Br(this,void 0,void 0,function(){var n,o,r,i;return Wr(this,function(s){switch(s.label){case 0:n=e.load(t),e.downloads.push(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n];case 2:return o=s.sent(),this.set(o),this.onload(this),[3,4];case 3:throw r=s.sent(),i=e.downloads.indexOf(n),e.downloads.splice(i,1),r;case 4:return[2,this]}})})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=void 0,this},e.prototype.fromArray=function(t){for(var e=io(t)&&t[0].length>0,n=e?t.length:1,o=e?t[0].length:t.length,r=tr(),i=r.createBuffer(n,o,r.sampleRate),s=e||1!==n?t:[t],a=0;a<n;a++)i.copyToChannel(s[a],a);return this._buffer=i,this},e.prototype.toMono=function(t){if(no(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,o=0;o<n;o++)for(var r=this.toArray(o),i=0;i<r.length;i++)e[i]+=r[i];e=e.map(function(t){return t/n}),this.fromArray(e)}return this},e.prototype.toArray=function(t){if(no(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},e.prototype.getChannelData=function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)},e.prototype.slice=function(t,n){void 0===n&&(n=this.duration);var o=Math.floor(t*this.sampleRate),r=Math.floor(n*this.sampleRate);this.assert(o<r,"The start time must be less than the end time");for(var i=r-o,s=tr().createBuffer(this.numberOfChannels,i,this.sampleRate),a=0;a<this.numberOfChannels;a++)s.copyToChannel(this.getChannelData(a).subarray(o,r),a);return new e(s)},e.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())},enumerable:!0,configurable:!0}),e.fromArray=function(t){return(new e).fromArray(t)},e.fromUrl=function(t){return Br(this,void 0,void 0,function(){return Wr(this,function(n){switch(n.label){case 0:return[4,(new e).load(t)];case 1:return[2,n.sent()]}})})},e.load=function(t){return Br(this,void 0,void 0,function(){var n,o,r,i,s,a,u,c,l,p;return Wr(this,function(h){switch(h.label){case 0:if(n=t.match(/\[(.+\|?)+\]$/)){o=n[1].split("|"),r=o[0];try{for(i=zr(o),s=i.next();!s.done;s=i.next())if(a=s.value,e.supportsType(a)){r=a;break}}catch(t){l={error:t}}finally{try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(l)throw l.error}}t=t.replace(n[0],r)}return[4,fetch(e.baseUrl+t)];case 1:if(!(u=h.sent()).ok)throw new Error("could not load url: "+t);return[4,u.arrayBuffer()];case 2:return c=h.sent(),[4,tr().decodeAudioData(c)];case 3:return[2,h.sent()]}})})},e.supportsType=function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)},e.loaded=function(){return Br(this,void 0,void 0,function(){var t,n,o,r,i;return Wr(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,7]),t=zr(e.downloads),n=t.next(),s.label=1;case 1:return n.done?[3,4]:[4,n.value];case 2:s.sent(),s.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return o=s.sent(),r={error:o},[3,7];case 6:try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(r)throw r.error}return[7];case 7:return[2]}})})},e.baseUrl="",e.downloads=[],e}(Po),Gr=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Qr=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function Xr(t,e,n,o){return void 0===n&&(n=2),void 0===o&&(o=tr().sampleRate),Gr(this,void 0,void 0,function(){var r,i,s,a;return Qr(this,function(u){switch(u.label){case 0:return r=tr(),er(i=new $o(n,e,o)),[4,t(i)];case 1:return u.sent(),s=i.render(),er(r),[4,s];case 2:return a=u.sent(),[2,new Ur(a)]}})})}var Yr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Hr=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffers",n._buffers=new Map,n._loadingCount=0;var o=xo(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return n.baseUrl=o.baseUrl,Object.keys(o.urls).forEach(function(t){n._loadingCount++;var e=o.urls[t];n.add(t,e,n._bufferLoaded.bind(n,o.onload))}),n}return Yr(e,t),e.getDefaults=function(){return{baseUrl:"",onerror:Nr,onload:Nr,urls:{}}},e.prototype.has=function(t){return this._buffers.has(t.toString())},e.prototype.get=function(t){return this.assert(this.has(t),"ToneAudioBuffers has no buffer named: "+t),this._buffers.get(t.toString())},e.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t()},Object.defineProperty(e.prototype,"loaded",{get:function(){return Array.from(this._buffers).every(function(t){var e=Zr(t,2);e[0];return e[1].loaded})},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return void 0===n&&(n=Nr),so(e)?this._buffers.set(t.toString(),new Ur(this.baseUrl+e,n)):this._buffers.set(t.toString(),new Ur(e,n)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.forEach(function(t){return t.dispose()}),this._buffers.clear(),this},e}(Po),$r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jr=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["delayTime","maxDelay"]))||this;n.name="Delay";var o=xo(e.getDefaults(),arguments,["delayTime","maxDelay"]),r=n.toSeconds(o.maxDelay);return n.maxDelay=Math.max(r,n.toSeconds(o.delayTime)),n._delayNode=n.input=n.output=n.context.createDelay(r),n.delayTime=new Sr({context:n.context,param:n._delayNode.delayTime,units:"time",value:o.delayTime}),Rr(n,"delayTime"),n}return $r(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{delayTime:0,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},e}(jr),Kr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ti=function(t){function e(e){void 0===e&&(e="stopped");var n=t.call(this)||this;return n.name="StateTimeline",n._initial=e,n}return Kr(e,t),e.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},e.prototype.setStateAtTime=function(t,e,n){return this.add(Object.assign({},n,{state:t,time:e})),this},e.prototype.getLastState=function(t,e){for(var n=this._search(e);n>=0;n--){var o=this._timeline[n];if(o.state===t)return o}},e.prototype.getNextState=function(t,e){var n=this._search(e);if(-1!==n)for(var o=n;o<this._timeline.length;o++){var r=this._timeline[o];if(r.state===t)return r}},e}(Fo),ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ni=function(t){function e(e){var n=t.call(this,e)||this;return n.onended=Nr,n._startTime=-1,n._stopTime=-1,n._timeout=-1,n.output=new Fr({context:n.context,gain:0}),n._gainNode=n.output,n.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},n._fadeIn=e.fadeIn,n._fadeOut=e.fadeOut,n._curve=e.curve,n.onended=e.onended,n}return ei(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Nr})},e.prototype._startGain=function(t,e){void 0===e&&(e=1),this.assert(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this},e.prototype.stop=function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this},e.prototype._stopGain=function(t){var e=this;this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()},this._stopTime-this.context.now()),this},e.prototype._onended=function(){var t=this;this.onended!==Nr&&(this.onended(this),this.onended=Nr,setTimeout(function(){return t.dispose()},1e3))},Object.defineProperty(e.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.cancelStop=function(){return this.log("cancelStop"),this.assert(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this},e}(jr),oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ri=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["offset"]))||this;n.name="ToneConstantSource",n._source=n.context.createConstantSource();var o=xo(e.getDefaults(),arguments,["offset"]);return Dr(n._source,n._gainNode),n.offset=new Sr({context:n.context,convert:o.convert,param:n._source.offset,units:o.units,value:o.offset}),n}return oi(e,t),e.getDefaults=function(){return Object.assign(ni.getDefaults(),{convert:!0,offset:1,units:"number"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this},e.prototype._stopSource=function(t){this._source.stop(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this},e}(ni),ii=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),si=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["value","units"]))||this;n.name="Signal",n.override=!0;var o=xo(e.getDefaults(),arguments,["value","units"]);return n.output=n._constantSource=new ri({context:n.context,convert:o.convert,offset:o.value,units:o.units}),n._constantSource.start(0),n.input=n._param=n._constantSource.offset,n}return ii(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{convert:!0,units:"number",value:0})},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),ai(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._constantSource.dispose(),this},e.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(t,e),this},e.prototype.getValueAtTime=function(t){return this._param.getValueAtTime(t)},e.prototype.setRampPoint=function(t){return this._param.setRampPoint(t),this},e.prototype.linearRampToValueAtTime=function(t,e){return this._param.linearRampToValueAtTime(t,e),this},e.prototype.exponentialRampToValueAtTime=function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this},e.prototype.exponentialRampTo=function(t,e,n){return this._param.exponentialRampTo(t,e,n),this},e.prototype.linearRampTo=function(t,e,n){return this._param.linearRampTo(t,e,n),this},e.prototype.targetRampTo=function(t,e,n){return this._param.targetRampTo(t,e,n),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this},e.prototype.setTargetAtTime=function(t,e,n){return this._param.setTargetAtTime(t,e,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,o){return this._param.setValueCurveAtTime(t,e,n,o),this},e.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(t),this},e.prototype.cancelAndHoldAtTime=function(t){return this._param.cancelAndHoldAtTime(t),this},e.prototype.rampTo=function(t,e,n){return this._param.rampTo(t,e,n),this},Object.defineProperty(e.prototype,"value",{get:function(){return this._param.value},set:function(t){this._param.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convert",{get:function(){return this._param.convert},set:function(t){this._param.convert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden",{get:function(){return this._param.overridden},set:function(t){this._param.overridden=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),e.prototype.apply=function(t){return this._param.apply(t),this},e}(jr);function ai(t,e,n,o){(e instanceof Sr||fo(e)||e instanceof si&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof si&&(e.overridden=!0)),Dr(t,e,n,o)}var ui=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ci=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["value"]))||this;n.name="TickParam",n._events=new Fo(1/0),n._multiplier=1;var o=xo(e.getDefaults(),arguments,["value"]);return n._multiplier=o.multiplier,n._events.cancel(0),n._events.add({ticks:0,time:0,type:"setValueAtTime",value:n._fromType(o.value)}),n.setValueAtTime(o.value,0),n}return ui(e,t),e.getDefaults=function(){return Object.assign(Sr.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var o=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max(1/n,1)),s=0;s<=i;s++){var a=n*s+e,u=this._exponentialApproach(r.time,r.value,o,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},e.prototype.setValueAtTime=function(e,n){var o=this.toSeconds(n);t.prototype.setValueAtTime.call(this,e,n);var r=this._events.get(o),i=this._events.previousEvent(r),s=this._getTicksUntilEvent(i,o);return r.ticks=Math.max(s,0),this},e.prototype.linearRampToValueAtTime=function(e,n){var o=this.toSeconds(n);t.prototype.linearRampToValueAtTime.call(this,e,n);var r=this._events.get(o),i=this._events.previousEvent(r),s=this._getTicksUntilEvent(i,o);return r.ticks=Math.max(s,0),this},e.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),o=this._events.get(e),r=Math.round(Math.max(10*(e-o.time),1)),i=(e-o.time)/r,s=0;s<=r;s++){var a=i*s+o.time,u=this._exponentialInterpolate(o.time,o.value,e,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},e.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Kn(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var o=this._fromType(this.getValueAtTime(t.time)),r=this._fromType(this.getValueAtTime(e)),i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(o+r)+t.ticks},e.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)},e.prototype.getDurationOfTicks=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-n},e.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var o=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-o)/(n.time-e.time),i=Math.sqrt(Math.pow(o,2)-2*r*(e.ticks-t)),s=(-o+i)/r;return(s>0?s:(-o-i)/r)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},e.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},e.prototype.timeToTicks=function(t,e){var n=this.toSeconds(e),o=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+o)-r},e.prototype._fromType=function(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):t.prototype._fromType.call(this,e)},e.prototype._toType=function(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:t.prototype._toType.call(this,e)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.value=e},enumerable:!0,configurable:!0}),e}(Sr),li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pi=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["value"]))||this;n.name="TickSignal";var o=xo(e.getDefaults(),arguments,["value"]);return n.input=n._param=new ci({context:n.context,convert:o.convert,multiplier:o.multiplier,param:n._constantSource.offset,units:o.units,value:o.value}),n}return li(e,t),e.getDefaults=function(){return Object.assign(si.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.ticksToTime=function(t,e){return this._param.ticksToTime(t,e)},e.prototype.timeToTicks=function(t,e){return this._param.timeToTicks(t,e)},e.prototype.getTimeOfTick=function(t){return this._param.getTimeOfTick(t)},e.prototype.getDurationOfTicks=function(t,e){return this._param.getDurationOfTicks(t,e)},e.prototype.getTicksAtTime=function(t){return this._param.getTicksAtTime(t)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this},e}(si),hi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fi=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency"]))||this;n.name="TickSource",n._state=new ti,n._tickOffset=new Fo;var o=xo(e.getDefaults(),arguments,["frequency"]);return n.frequency=new pi({context:n.context,units:o.units,value:o.frequency}),Rr(n,"frequency"),n._state.setStateAtTime("stopped",0),n.setTicksAtTime(0,0),n}return hi(e,t),e.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},Cr.getDefaults())},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),to(e)&&this.setTicksAtTime(e,n)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},e.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},e.prototype.getTicksAtTime=function(t){var e=this,n=this.toSeconds(t),o=this._state.getLastState("stopped",n);if(!o)return 0;var r={state:"paused",time:n};this._state.add(r);var i=o,s=0;return this._state.forEachBetween(o.time,n+this.sampleTime,function(t){var n=i.time,o=e._tickOffset.get(t.time);o&&o.time>=i.time&&(s=o.ticks,n=o.time),"started"===i.state&&"started"!==t.state&&(s+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),i=t}),this._state.remove(r),s},Object.defineProperty(e.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t);if(!n)return 0;var o={state:"paused",time:t};this._state.add(o);var r=n,i=0;return this._state.forEachBetween(n.time,t+this.sampleTime,function(t){var n=r.time,o=e._tickOffset.get(t.time);o&&o.time>=r.time&&(i=o.seconds,n=o.time),"started"===r.state&&"started"!==t.state&&(i+=t.time-n),r=t}),this._state.remove(o),i},e.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},e.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},e.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var n=this._tickOffset.get(e),o=this._state.get(e),r=Math.max(n.time,o.time),i=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(i)},e.prototype.forEachTickBetween=function(t,e,n){var o=this,r=this.toSeconds(t),i=this.toSeconds(e),s=this._state.get(r);this._state.forEachBetween(r,i,function(t){s&&"started"===s.state&&"started"!==t.state&&o.forEachTickBetween(Math.max(s.time,r),t.time-o.sampleTime,n),s=t});var a=null;if(s&&"started"===s.state&&this._state){var u=Math.max(s.time,r),c=this.frequency.getTicksAtTime(u),l=(c-this.frequency.getTicksAtTime(s.time))%1;0!==l&&(l=1-l);for(var p=this.frequency.getTimeOfTick(c+l);p<i&&this._state;){try{n(p,Math.round(this.getTicksAtTime(p)))}catch(t){a=t;break}this._state&&(p+=this.frequency.getDurationOfTicks(1,p))}}if(a)throw a;return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},e}(Cr),di=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_i=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["callback","frequency"]))||this;n.name="Clock",n.callback=Nr,n._lastUpdate=0,n._state=new ti("stopped"),n._boundLoop=n._loop.bind(n);var o=xo(e.getDefaults(),arguments,["callback","frequency"]);return n.callback=o.callback,n._tickSource=new fi({context:n.context,frequency:o.frequency,units:o.units}),n._lastUpdate=0,n.frequency=n._tickSource.frequency,Rr(n,"frequency"),n._state.setStateAtTime("stopped",0),n.context.on("tick",n._boundLoop),n}return di(e,t),e.getDefaults=function(){return Object.assign(Cr.getDefaults(),{callback:Nr,frequency:1,units:"hertz"})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(e.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},e.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},e.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},e.prototype.nextTickTime=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(o+t,n)},e.prototype._loop=function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,n,function(e,n){t.callback(e,n)}))},e.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},e}(Cr);Do.mixin(_i);var yi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Ticks",e.defaultUnits="i",e}return yi(e,t),e.prototype._now=function(){return this.context.transport.ticks},e.prototype._beatsToUnits=function(t){return this._getPPQ()*t},e.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},e.prototype._ticksToUnits=function(t){return t},e.prototype.toTicks=function(){return this.valueOf()},e.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},e}(Or);function vi(t,e){return new mi(tr(),t,e)}var gi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Midi",e.defaultUnits="midi",e}return gi(e,t),e.prototype._frequencyToUnits=function(e){return cr(t.prototype._frequencyToUnits.call(this,e))},e.prototype._ticksToUnits=function(e){return cr(t.prototype._ticksToUnits.call(this,e))},e.prototype._beatsToUnits=function(e){return cr(t.prototype._beatsToUnits.call(this,e))},e.prototype._secondsToUnits=function(e){return cr(t.prototype._secondsToUnits.call(this,e))},e.prototype.toMidi=function(){return this.valueOf()},e.prototype.toFrequency=function(){return lr(this.toMidi())},e.prototype.transpose=function(t){return new e(this.context,this.toMidi()+t)},e}(mr);function wi(t,e){return new bi(tr(),t,e)}var Oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Draw",e.expiration=.25,e.anticipation=.008,e._events=new Fo,e._boundDrawLoop=e._drawLoop.bind(e),e._animationFrame=-1,e}return Oi(e,t),e.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},e.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},e.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},e}(Cr),Ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ci=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="IntervalTimeline",e._root=null,e._length=0,e}return Ti(e,t),e.prototype.add=function(t){this.assert(to(t.time),"Events must have a time property"),this.assert(to(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new Si(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},e.prototype.remove=function(t){var e,n;if(null!==this._root){var o=[];this._root.search(t.time,o);try{for(var r=Ci(o),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.event===t){this._removeNode(s),this._length--;break}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}return this},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,function(t){return e.remove(t)}),this},e.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},e.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},e.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()},e.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?n?e.left=o:e.right=o:this._setRoot(o)},e.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?n?e.left=o:e.right=o:this._setRoot(o)},e.prototype._rebalance=function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},e.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],o=1;o<e.length;o++)e[o].low>n.low&&(n=e[o]);return n.event}}return null},e.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){return e.push(t)}),e.forEach(function(e){e.event&&t(e.event)})}return this},e.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._root&&this._root.traverse(function(t){return t.dispose()}),this._root=null,this},e}(Po),Si=function(){function t(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}return t.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},t.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},t.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},t.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},t.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},t.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},t.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},t.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t}(),ki=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pi=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["volume"]))||this;n.name="Volume";var o=xo(e.getDefaults(),arguments,["volume"]);return n.input=n.output=new Fr({context:n.context,gain:o.volume,units:"decibels"}),n.volume=n.output.gain,Rr(n,"volume"),n._unmutedVolume=o.volume,n.mute=o.mute,n}return ki(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.volume.dispose(),this},e}(jr),Ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ji=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Mi=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ji(arguments[e]));return t},Di=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="Destination",n.input=new Pi({context:n.context}),n.output=new Fr({context:n.context}),n.volume=n.input.volume;var o=xo(e.getDefaults(),arguments);return Mr(n.input,n.output,n.context.rawContext.destination),n.mute=o.mute,n}return Ei(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Mr.apply(void 0,Mi(t)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.volume.dispose(),this},e}(jr);Bo(function(t){t.destination=new Di({context:t})}),zo(function(t){t.destination.dispose()});var Ii=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ri=function(t){function e(e){var n=t.call(this)||this;return n.name="TimelineValue",n._timeline=new Fo({memory:10}),n._initialValue=e,n}return Ii(e,t),e.prototype.set=function(t,e){return this._timeline.add({value:t,time:e}),this},e.prototype.get=function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue},e}(Po),Vi=function(){function t(e,n){this.id=t._eventId++;var o=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}return t.getDefaults=function(){return{callback:Nr,once:!1,time:0}},t.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},t.prototype.dispose=function(){return this.callback=void 0,this},t._eventId=0,t}(),Ni=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qi=function(t){function e(n,o){var r=t.call(this,n,o)||this;r._currentId=-1,r._nextId=-1,r._nextTick=r.time,r._boundRestart=r._restart.bind(r);var i=Object.assign(e.getDefaults(),o);return r.duration=new mi(n.context,i.duration).valueOf(),r._interval=new mi(n.context,i.interval).valueOf(),r._nextTick=i.time,r.transport.on("start",r._boundRestart),r.transport.on("loopStart",r._boundRestart),r.context=r.transport.context,r._restart(),r}return Ni(e,t),e.getDefaults=function(){return Object.assign({},Vi.getDefaults(),{duration:1/0,interval:1,once:!1})},e.prototype.invoke=function(e){this._createEvents(e),t.prototype.invoke.call(this,e)},e.prototype._createEvents=function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new mi(this.context,this._nextTick).toSeconds()))},e.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new mi(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new mi(this.context,this._nextTick).toSeconds())},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},e}(Vi),Fi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Li=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="Transport",n._loop=new Ri(!1),n._loopStart=0,n._loopEnd=0,n._scheduledEvents={},n._timeline=new Fo,n._repeatedEvents=new Ai,n._syncedSignals=[],n._swingAmount=0;var o=xo(e.getDefaults(),arguments);return n._ppq=o.ppq,n._clock=new _i({callback:n._processTick.bind(n),context:n.context,frequency:0,units:"bpm"}),n._bindClockEvents(),n.bpm=n._clock.frequency,n._clock.frequency.multiplier=o.ppq,n.bpm.value=o.bpm,Rr(n,"bpm"),n._timeSignature=o.timeSignature,n._swingTicks=o.ppq/2,n}return Fi(e,t),e.getDefaults=function(){return Object.assign(Cr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},e.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),o=Math.sin(n*Math.PI)*this._swingAmount;t+=new mi(this.context,2*this._swingTicks/3).toSeconds()*o}this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){return e.invoke(t)})},e.prototype.schedule=function(t,e){var n=new Vi(this,{callback:t,time:new Or(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.scheduleRepeat=function(t,e,n,o){void 0===o&&(o=1/0);var r=new qi(this,{callback:t,duration:new dr(this.context,o).toTicks(),interval:new dr(this.context,e).toTicks(),time:new Or(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)},e.prototype.scheduleOnce=function(t,e){var n=new Vi(this,{callback:t,once:!0,time:new Or(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},e.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},e.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var n=this.toTicks(t);return this._timeline.forEachFrom(n,function(t){return e.clear(t.id)}),this._repeatedEvents.forEachFrom(n,function(t){return e.clear(t.id)}),this},e.prototype._bindClockEvents=function(){var t=this;this._clock.on("start",function(e,n){n=new mi(t.context,n).toSeconds(),t.emit("start",e,n)}),this._clock.on("stop",function(e){t.emit("stop",e)}),this._clock.on("pause",function(e){t.emit("pause",e)})},Object.defineProperty(e.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n;return to(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this},e.prototype.stop=function(t){return this._clock.stop(t),this},e.prototype.pause=function(t){return this._clock.pause(t),this},e.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(e.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){io(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new dr(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new dr(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())},enumerable:!0,configurable:!0}),e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swingSubdivision",{get:function(){return new mi(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new mi(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();"started"===this.state?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),e.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},e.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(e.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},e.prototype.syncSignal=function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var o=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/o}else e=0}var r=new Fr(e);return this.bpm.connect(r),r.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:r,signal:t}),t.value=0,this},e.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._clock.dispose(),Vr(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},e}(Cr);Do.mixin(Li),Bo(function(t){t.transport=new Li({context:t})}),zo(function(t){t.transport.dispose()});var Bi=n(1),Wi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zi=function(t){function e(e){var n=t.call(this,e)||this;return n.input=void 0,n._state=new ti("stopped"),n._synced=!1,n._scheduled=[],n._syncedStart=Nr,n._syncedStop=Nr,n._state.memory=100,n._volume=n.output=new Pi({context:n.context,mute:e.mute,volume:e.volume}),n.volume=n._volume.volume,Rr(n,"volume"),n.onstop=e.onstop,n}return Wi(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{mute:!1,onstop:Nr,volume:0})},Object.defineProperty(e.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype._clampToCurrentTime=function(t){return this._synced?t:Math.max(t,this.context.currentTime)},e.prototype.start=function(t,e,n){var o=this,r=Kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),"started"===this._state.getValueAtTime(r))this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){var i=this._state.get(r);i&&(i.offset=this.toSeconds(To(e,0)),i.duration=n?this.toSeconds(n):void 0);var s=this.context.transport.schedule(function(t){o._start(t,e,n)},r);this._scheduled.push(s),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start(r,e,n);return this},e.prototype.stop=function(t){var e=Kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this},e.prototype.sync=function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var o=t._state.get(n);if(o&&"started"===o.state&&o.time!==n){var r=n-t.toSeconds(o.time),i=void 0;o.duration&&(i=t.toSeconds(o.duration)-r),t._start(e,t.toSeconds(o.offset)+r,i)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},e.prototype.unsync=function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(e){return t.context.transport.clear(e)}),this._scheduled=[],this._state.cancel(0),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.onstop=Nr,this.unsync(),this._volume.dispose(),this._state.dispose(),this},e}(jr),Ui=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gi=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["buffer","onload"]))||this;n.name="ToneBufferSource",n._source=n.context.createBufferSource(),n._internalChannels=[n._source],n._sourceStarted=!1,n._sourceStopped=!1;var o=xo(e.getDefaults(),arguments,["buffer","onload"]);return Dr(n._source,n._gainNode),n._source.onended=function(){return n._stopSource()},n.playbackRate=new Sr({context:n.context,param:n._source.playbackRate,units:"positive",value:o.playbackRate}),n.loop=o.loop,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n._buffer=new Ur(o.buffer,o.onload),n._internalChannels.push(n._source),n}return Ui(e,t),e.getDefaults=function(){return Object.assign(ni.getDefaults(),{buffer:new Ur,loop:!1,loopEnd:0,loopStart:0,onload:Nr,playbackRate:1})},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,n,o){void 0===o&&(o=1),this.assert(this.buffer.loaded,"buffer is either not set or not loaded");var r=this.toSeconds(t);this._startGain(r,o),e=this.loop?To(e,this.loopStart):To(e,0);var i,s,a=Math.max(this.toSeconds(e),0);if(this.loop){var u=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=u-c;(Ro(i=a,s=u)||No(i,s))&&(a=(a-c)%l+c)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Vo(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,a)),to(n)){var p=this.toSeconds(n);p=Math.max(p,0),this.stop(r+p)}return this},e.prototype._stopSource=function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},e}(ni),Qi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xi=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["type"]))||this;n.name="Noise",n._source=null;var o=xo(e.getDefaults(),arguments,["type"]);return n._playbackRate=o.playbackRate,n.type=o.type,n._fadeIn=o.fadeIn,n._fadeOut=o.fadeOut,n}return Qi(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(this.assert(t in Zi,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)},enumerable:!0,configurable:!0}),e.prototype._start=function(t){var e=this,n=Zi[this._type];this._source=new Gi({buffer:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return e.onstop(e)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(n.duration-.001))},e.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)},enumerable:!0,configurable:!0}),e.prototype.restart=function(t){return this._stop(t),this._start(t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},e}(zi),Yi={brown:null,pink:null,white:null},Zi={get brown(){if(!Yi.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var o=0,r=0;r<220500;r++){var i=2*Math.random()-1;n[r]=(o+.02*i)/1.02,o=n[r],n[r]*=3.5}}Yi.brown=(new Ur).fromArray(t)}return Yi.brown},get pink(){if(!Yi.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var o=void 0,r=void 0,i=void 0,s=void 0,a=void 0,u=void 0,c=void 0;o=r=i=s=a=u=c=0;for(var l=0;l<220500;l++){var p=2*Math.random()-1;o=.99886*o+.0555179*p,r=.99332*r+.0750759*p,i=.969*i+.153852*p,s=.8665*s+.3104856*p,a=.55*a+.5329522*p,u=-.7616*u-.016898*p,n[l]=o+r+i+s+a+u+c+.5362*p,n[l]*=.11,c=.115926*p}}Yi.pink=(new Ur).fromArray(t)}return Yi.pink},get white(){if(!Yi.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var o=0;o<220500;o++)n[o]=2*Math.random()-1}Yi.white=(new Ur).fromArray(t)}return Yi.white}},Hi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$i=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="ToneOscillatorNode",n._oscillator=n.context.createOscillator(),n._internalChannels=[n._oscillator];var o=xo(e.getDefaults(),arguments,["frequency","type"]);return Dr(n._oscillator,n._gainNode),n.type=o.type,n.frequency=new Sr({context:n.context,param:n._oscillator.frequency,units:"frequency",value:o.frequency}),n.detune=new Sr({context:n.context,param:n._oscillator.detune,units:"cents",value:o.detune}),n}return Hi(e,t),e.getDefaults=function(){return Object.assign(ni.getDefaults(),{detune:0,frequency:440,type:"sine"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this},e.prototype._stopSource=function(t){this._oscillator.stop(t)},e.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this},e}(ni),Ji=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ki=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},ts=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="Oscillator",n._oscillator=null;var o=xo(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new si({context:n.context,units:"frequency",value:o.frequency}),Rr(n,"frequency"),n.detune=new si({context:n.context,units:"cents",value:o.detune}),Rr(n,"detune"),n._partials=o.partials,n._partialCount=o.partialCount,n._type=o.type,o.partialCount&&"custom"!==o.type&&(n._type=n.baseType+o.partialCount.toString()),n.phase=o.phase,n}return Ji(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},e.prototype._start=function(t){var e=this,n=this.toSeconds(t),o=new $i({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)},e.prototype._stop=function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)},e.prototype.restart=function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this},e.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},e.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},e.prototype._getCachedPeriodicWave=function(){var t=this;if("custom"===this._type)return(n=e._periodicWaveCache.find(function(e){return e.phase===t._phase&&(n=e.partials,o=t._partials,n.length===o.length&&n.every(function(t,e){return o[e]===t}));var n,o}))&&[n.real,n.imag];var n=e._periodicWaveCache.find(function(e){return e.type===t._type&&e.phase===t._phase});return this._partialCount=n?n.partialCount:this._partialCount,n&&[n.real,n.imag]},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t;var n=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&n)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var o=this._getCachedPeriodicWave();if(to(o)){var r=Ki(o,2),i=r[0],s=r[1];this._wave=this.context.createPeriodicWave(i,s),null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var a=Ki(this._getRealImaginary(t,this._phase),2),u=(i=a[0],s=a[1],this.context.createPeriodicWave(i,s));this._wave=u,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),e._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type}),e._periodicWaveCache.length>100&&e._periodicWaveCache.shift()}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);n&&(e=n[1]),"custom"!==this._type&&(this.type=0===t?e:e+t.toString())},enumerable:!0,configurable:!0}),e.prototype.get=function(){var e=t.prototype.get.call(this);return"custom"!==e.type&&delete e.partials,e},e.prototype._getRealImaginary=function(t,e){var n=2048,o=new Float32Array(n),r=new Float32Array(n),i=1;if("custom"===t){if(i=this._partials.length+1,this._partialCount=this._partials.length,n=i,0===this._partials.length)return[o,r]}else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);s?(i=parseInt(s[2],10)+1,this._partialCount=parseInt(s[2],10),t=s[1],n=i=Math.max(i,2)):this._partialCount=0,this._partials=[]}for(var a=1;a<n;++a){var u=2/(a*Math.PI),c=void 0;switch(t){case"sine":c=a<=i?1:0,this._partials[a-1]=c;break;case"square":c=1&a?2*u:0,this._partials[a-1]=c;break;case"sawtooth":c=u*(1&a?1:-1),this._partials[a-1]=c;break;case"triangle":c=1&a?u*u*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=c;break;case"custom":c=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(o[a]=-c*Math.sin(e*a),r[a]=c*Math.cos(e*a)):(o[a]=0,r[a]=0)}return[o,r]},e.prototype._inverseFFT=function(t,e,n){for(var o=0,r=t.length,i=0;i<r;i++)o+=t[i]*Math.cos(i*n)+e[i]*Math.sin(i*n);return o},e.prototype.getInitialValue=function(){for(var t=Ki(this._getRealImaginary(this._type,0),2),e=t[0],n=t[1],o=0,r=2*Math.PI,i=0;i<32;i++)o=Math.max(this._inverseFFT(e,n,i/32*r),o);return-this._inverseFFT(e,n,this._phase)/o},Object.defineProperty(e.prototype,"partials",{get:function(){return this._partials},set:function(t){this._partials=t,t.length&&(this.type="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},e._periodicWaveCache=[],e}(zi),es=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ns=function(t){function e(){return t.call(this,Object.assign(xo(e.getDefaults(),arguments,["context"])))||this}return es(e,t),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),ai(this,t,e,n),this},e}(jr),os=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rs=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["mapping","length"])))||this;n.name="WaveShaper",n._shaper=n.context.createWaveShaper(),n.input=n._shaper,n.output=n._shaper;var o=xo(e.getDefaults(),arguments,["mapping","length"]);return io(o.mapping)||o.mapping instanceof Float32Array?n.curve=Float32Array.from(o.mapping):eo(o.mapping)&&n.setMap(o.mapping,o.length),n}return os(e,t),e.getDefaults=function(){return Object.assign(si.getDefaults(),{length:1024})},e.prototype.setMap=function(t,e){void 0===e&&(e=1024);for(var n=new Float32Array(e),o=0,r=e;o<r;o++){var i=o/(r-1)*2-1;n[o]=t(i,o)}return this.curve=n,this},Object.defineProperty(e.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){var e=["none","2x","4x"].some(function(e){return e.includes(t)});this.assert(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this},e}(ns),is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ss=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioToGain",e._norm=new rs({context:e.context,mapping:function(t){return(t+1)/2}}),e.input=e._norm,e.output=e._norm,e}return is(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(ns),as=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),us=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["value"])))||this;n.name="Multiply",n.override=!1,n._mult=new Fr({context:n.context}),n.input=n._mult,n.output=n._mult;var o=xo(e.getDefaults(),arguments,["value"]);return n.factor=n._param=n._mult.gain,n.factor.setValueAtTime(o.value,0),n}return as(e,t),e.getDefaults=function(){return Object.assign(si.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this},e}(si),cs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ls=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="AMOscillator",n._modulationScale=new ss({context:n.context}),n._modulationNode=new Fr({context:n.context});var o=xo(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new ts({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase,type:o.type}),n.frequency=n._carrier.frequency,n.detune=n._carrier.detune,n._modulator=new ts({context:n.context,phase:o.phase,type:o.modulationType}),n.harmonicity=new us({context:n.context,units:"positive",value:o.harmonicity}),n.frequency.chain(n.harmonicity,n._modulator.frequency),n._modulator.chain(n._modulationScale,n._modulationNode.gain),n._carrier.chain(n._modulationNode,n.output),Rr(n,["frequency","detune","harmonicity"]),n}return cs(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{harmonicity:1,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this},e}(zi),ps=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hs=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="FMOscillator",n._modulationNode=new Fr({context:n.context,gain:0});var o=xo(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new ts({context:n.context,detune:o.detune,frequency:0,onstop:function(){return n.onstop(n)},phase:o.phase,type:o.type}),n.detune=n._carrier.detune,n.frequency=new si({context:n.context,units:"frequency",value:o.frequency}),n._modulator=new ts({context:n.context,phase:o.phase,type:o.modulationType}),n.harmonicity=new us({context:n.context,units:"positive",value:o.harmonicity}),n.modulationIndex=new us({context:n.context,units:"positive",value:o.modulationIndex}),n.frequency.connect(n._carrier.frequency),n.frequency.chain(n.harmonicity,n._modulator.frequency),n.frequency.chain(n.modulationIndex,n._modulationNode),n._modulator.connect(n._modulationNode.gain),n._modulationNode.connect(n._carrier.frequency),n._carrier.connect(n.output),n.detune.connect(n._modulator.detune),Rr(n,["modulationIndex","frequency","detune","harmonicity"]),n}return ps(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this},e}(zi),fs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ds=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","width"]))||this;n.name="PulseOscillator",n._widthGate=new Fr({context:n.context,gain:0}),n._thresh=new rs({context:n.context,mapping:function(t){return t<=0?-1:1}});var o=xo(e.getDefaults(),arguments,["frequency","width"]);return n.width=new si({context:n.context,units:"audioRange",value:o.width}),n._sawtooth=new ts({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase,type:"sawtooth"}),n.frequency=n._sawtooth.frequency,n.detune=n._sawtooth.detune,n._sawtooth.chain(n._thresh,n.output),n.width.chain(n._widthGate,n._thresh),Rr(n,["width","frequency","detune"]),n}return fs(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})},e.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)},e.prototype.restart=function(t){var e=this.toSeconds(t);return this._sawtooth.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e),this},Object.defineProperty(e.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sawtooth.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this},e}(zi),_s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ys=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type","spread"]))||this;n.name="FatOscillator",n._oscillators=[];var o=xo(e.getDefaults(),arguments,["frequency","type","spread"]);return n.frequency=new si({context:n.context,units:"frequency",value:o.frequency}),n.detune=new si({context:n.context,units:"cents",value:o.detune}),n._spread=o.spread,n._type=o.type,n._phase=o.phase,n._partials=o.partials,n._partialCount=o.partialCount,n.count=o.count,Rr(n,["frequency","detune"]),n}return _s(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{count:3,spread:20,type:"sawtooth"})},e.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.start(t)})},e.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.stop(t)})},e.prototype.restart=function(t){return t=this.toSeconds(t),this._forEach(function(e){return e.restart(t)}),this},e.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){return e.type=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach(function(t,o){return t.detune.value=e+n*o})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){var e=this;if(t=Math.max(t,1),this._oscillators.length!==t){this._forEach(function(t){return t.dispose()}),this._oscillators=[];for(var n=0;n<t;n++){var o=new ts({context:this.context,onstop:0===n?function(){return e.onstop(e)}:Nr});"custom"===this.type?o.partials=this._partials:o.type=this._type,o.partialCount=this._partialCount,o.phase=this._phase+n/t*360,o.volume.value=-6-1.1*t,this.frequency.connect(o.frequency),this.detune.connect(o.detune),o.connect(this.output),this._oscillators[n]=o}this.spread=this._spread,"started"===this.state&&this._forEach(function(t){return t.start()})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){return e.phase=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){return e.baseType=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,t.length&&(this._type="custom",this._forEach(function(e){return e.partials=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){return e.partialCount=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach(function(t){return t.dispose()}),this},e}(zi),ms=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vs=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","modulationFrequency"]))||this;n.name="PWMOscillator",n.sourceType="pwm",n._scale=new us({context:n.context,value:2});var o=xo(e.getDefaults(),arguments,["frequency","modulationFrequency"]);return n._pulse=new ds({context:n.context,frequency:o.modulationFrequency}),n._pulse._sawtooth.type="sine",n.modulationFrequency=n._pulse.frequency,n._modulator=new ts({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase}),n.frequency=n._modulator.frequency,n.detune=n._modulator.detune,n._modulator.chain(n._scale,n._pulse.width),n._pulse.connect(n.output),Rr(n,["modulationFrequency","frequency","detune"]),n}return ms(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})},e.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._pulse.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this},e}(zi),gs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bs={am:ls,fat:ys,fm:hs,oscillator:ts,pulse:ds,pwm:vs},ws=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OmniOscillator";var o=xo(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new si({context:n.context,units:"frequency",value:o.frequency}),n.detune=new si({context:n.context,units:"cents",value:o.detune}),Rr(n,["frequency","detune"]),n.set(o),n}return gs(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),hs.getDefaults(),ls.getDefaults(),ys.getDefaults(),ds.getDefaults(),vs.getDefaults())},e.prototype._start=function(t){this._oscillator.start(t)},e.prototype._stop=function(t){this._oscillator.stop(t)},e.prototype.restart=function(t){return this._oscillator.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){var t=this,e="";return["am","fm","fat"].some(function(e){return t._sourceType===e})&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)},enumerable:!0,configurable:!0}),e.prototype.set=function(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),t.prototype.set.call(this,e),this},e.prototype._createNewOscillator=function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var n=bs[t],o=this.now();if(this._oscillator){var r=this._oscillator;r.stop(o),this.context.setTimeout(function(){return r.dispose()},this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(o)}},Object.defineProperty(e.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceType",{get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")},enumerable:!0,configurable:!0}),e.prototype._getOscType=function(t,e){return t instanceof bs[e]},Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&no(t)&&(this._oscillator.count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&no(t)&&(this._oscillator.spread=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&so(t)&&(this._oscillator.modulationType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationFrequency",{get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this},e}(zi),Os=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xs=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Ts=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Cs=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Player",n._activeSources=new Set;var o=xo(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new Ur({onload:n._onload.bind(n,o.onload),reverse:o.reverse,url:o.url}),n.autostart=o.autostart,n._loop=o.loop,n._loopStart=o.loopStart,n._loopEnd=o.loopEnd,n._playbackRate=o.playbackRate,n.fadeIn=o.fadeIn,n.fadeOut=o.fadeOut,n}return Os(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Nr,playbackRate:1,reverse:!1})},e.prototype.load=function(t){return xs(this,void 0,void 0,function(){return Ts(this,function(e){switch(e.label){case 0:return[4,this._buffer.load(t)];case 1:return e.sent(),this._onload(),[2,this]}})})},e.prototype._onload=function(t){void 0===t&&(t=Nr),t(),this.autostart&&this.start()},e.prototype._onSourceEnd=function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||this._state.setStateAtTime("stopped",this.now())},e.prototype.start=function(e,n,o){return t.prototype.start.call(this,e,n,o),this},e.prototype._start=function(t,e,n){e=this._loop?To(e,this._loopStart):To(e,0);var o=this.toSeconds(e);this._synced&&(o*=this._playbackRate);var r=n;n=To(n,Math.max(this._buffer.duration-o,0));var i=this.toSeconds(n);i/=this._playbackRate,t=this.toSeconds(t);var s=new Gi({buffer:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||this._state.setStateAtTime("stopped",t+i,{implicitEnd:!0}),this._activeSources.add(s),this._loop&&Kn(r)?s.start(t,o):s.start(t,o,i-this.toSeconds(this.fadeOut))},e.prototype._stop=function(t){var e=this.toSeconds(t);this._activeSources.forEach(function(t){return t.stop(e)})},e.prototype.restart=function(t,e,n){return this._stop(t),this._start(t,e,n),this},e.prototype.seek=function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var o=this.toSeconds(t);this._stop(n),this._start(n,o)}return this},e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t}),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(function(t){return t.cancelStop()})),this._activeSources.forEach(function(n){n.playbackRate.setValueAtTime(t,e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._activeSources.forEach(function(t){return t.dispose()}),this._activeSources.clear(),this._buffer.dispose(),this},e}(zi),As=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ss=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},ks=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["urls","onload"],"urls"))||this;n.name="Players",n.input=void 0,n._players=new Map;var o=xo(e.getDefaults(),arguments,["urls","onload"],"urls");return n._volume=n.output=new Pi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,Rr(n,"volume"),n._buffers=new Hr(o.urls,o.onload,o.baseUrl),n.mute=o.mute,n._fadeIn=o.fadeIn,n._fadeOut=o.fadeOut,n}return As(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Nr,urls:{},volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._players.forEach(function(e){e.fadeIn=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._players.forEach(function(e){e.fadeOut=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Array.from(this._players).some(function(t){var e=Ss(t,2);e[0];return"started"===e[1].state})?"started":"stopped"},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._buffers.has(t)},e.prototype.player=function(t){if(this.assert(this.has(t),"No Player with the name "+t+" exists on this object"),!this._players.has(t)){var e=new Cs({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return this.assert(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this},e.prototype.stopAll=function(t){return this._players.forEach(function(e){return e.stop(t)}),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach(function(t){return t.dispose()}),this._buffers.dispose(),this},e}(jr),Ps=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Es=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["url","onload"]))||this;n.name="GrainPlayer",n._loopStart=0,n._loopEnd=0,n._activeSources=[];var o=xo(e.getDefaults(),arguments,["url","onload"]);return n.buffer=new Ur({onload:o.onload,reverse:o.reverse,url:o.url}),n._clock=new _i({context:n.context,callback:n._tick.bind(n),frequency:1/o.grainSize}),n._playbackRate=o.playbackRate,n._grainSize=o.grainSize,n._overlap=o.overlap,n.detune=o.detune,n.overlap=o.overlap,n.loop=o.loop,n.playbackRate=o.playbackRate,n.grainSize=o.grainSize,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n.reverse=o.reverse,n._clock.on("stop",n._onstop.bind(n)),n}return Ps(e,t),e.getDefaults=function(){return Object.assign(zi.getDefaults(),{onload:Nr,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})},e.prototype._start=function(t,e,n){e=To(e,0),e=this.toSeconds(e),t=this.toSeconds(t);var o=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/o),n&&this.stop(t+this.toSeconds(n))},e.prototype.restart=function(t,e,n){return this._stop(t),this._start(t,e,n),this},e.prototype._stop=function(t){this._clock.stop(t)},e.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t)}),this.onstop(this)},e.prototype._tick=function(t){var e=this,n=this._clock.getTicksAtTime(t),o=n*(1/this._clock.frequency.getValueAtTime(t));if(this.log("offset",o),!this.loop&&o>this.buffer.duration)this.stop(t);else{var r=o<this._overlap?0:this._overlap,i=new Gi({context:this.context,buffer:this.buffer,fadeIn:r,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:ar(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*n),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=function(){var t=e._activeSources.indexOf(i);-1!==t&&e._activeSources.splice(t,1)}}},Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this.buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(function(t){return t.dispose()}),this},e}(zi),js=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ms=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Add",n._sum=new Fr({context:n.context}),n.input=n._sum,n.output=n._sum,n.addend=n._param,Mr(n._constantSource,n._sum),n}return js(e,t),e.getDefaults=function(){return Object.assign(si.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this},e}(si),Ds=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Is=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Abs",e._abs=new rs({context:e.context,mapping:function(t){return Math.abs(t)<.001?0:Math.abs(t)}}),e.input=e._abs,e.output=e._abs,e}return Ds(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this},e}(ns),Rs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="GainToAudio",e._norm=new rs({context:e.context,mapping:function(t){return 2*Math.abs(t)-1}}),e.input=e._norm,e.output=e._norm,e}return Rs(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(ns),Ns=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Negate",e._multiply=new us({context:e.context,value:-1}),e.input=e._multiply,e.output=e._multiply,e}return Ns(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this},e}(ns),Fs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ls=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Subtract",n._sum=new Fr({context:n.context}),n.input=n._sum,n.output=n._sum,n._neg=new qs({context:n.context}),n.subtrahend=n._param,Mr(n._constantSource,n._neg,n._sum),n}return Fs(e,t),e.getDefaults=function(){return Object.assign(si.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._sum.dispose(),this},e}(si),Bs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ws=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments)))||this;return n.name="Zero",n._gain=new Fr({context:n.context}),n.output=n._gain,n.input=void 0,Dr(n.context.getConstant(0),n._gain),n}return Bs(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),Ir(this.context.getConstant(0),this._gain),this},e}(ns),zs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Us=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;n.name="Envelope",n._sig=new si({context:n.context,value:0}),n.output=n._sig,n.input=void 0;var o=xo(e.getDefaults(),arguments,["attack","decay","sustain","release"]);return n.attack=o.attack,n.decay=o.decay,n.sustain=o.sustain,n.release=o.release,n.attackCurve=o.attackCurve,n.releaseCurve=o.releaseCurve,n.decayCurve=o.decayCurve,n}return zs(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype._getCurve=function(t,e){if(so(t))return t;var n=void 0;for(n in Gs)if(Gs[n][e]===t)return n;return t},e.prototype._setCurve=function(t,e,n){if(so(n)&&Reflect.has(Gs,n)){var o=Gs[n];oo(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!io(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}},Object.defineProperty(e.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){this.assert(["linear","exponential"].some(function(e){return e===t}),"Invalid envelope curve: "+t),this._decayCurve=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){void 0===e&&(e=1),this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),o=this.toSeconds(this.decay),r=this.getValueAtTime(t);r>0&&(n=(1-r)/(1/n));if(0===n)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);for(var i=this._attackCurve,s=1;s<i.length;s++)if(i[s-1]<=r&&r<=i[s]){(i=this._attackCurve.slice(s))[0]=r;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(o){var a=e*this.sustain,u=t+n;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampTo(a,o,u+this.sampleTime):(this.assert("exponential"===this._decayCurve,'decayCurve can only be "linear" or "exponential", got '+this._decayCurve),this._sig.exponentialApproachValueAtTime(a,u,o))}return this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(this.assert(io(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this},e.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},e.prototype.triggerAttackRelease=function(t,e,n){return void 0===n&&(n=1),e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},e.prototype.cancel=function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),ai(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this},e}(jr),Gs=function(){var t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));var o=[];for(t=0;t<127;t++){e=t/127;var r=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=r/10+.83*e}o[127]=1;var i=[];for(t=0;t<128;t++)i[t]=Math.ceil(t/127*5)/5;var s=[];for(t=0;t<128;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));var a,u=[];for(t=0;t<128;t++){e=t/127;var c=4*Math.pow(e,3)+.2,l=Math.cos(c*Math.PI*2*e);u[t]=Math.abs(l*(1-e))}function p(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:p(u),Out:u},cosine:{In:n,Out:(a=n,a.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:o,Out:p(o)},sine:{In:s,Out:p(s)},step:{In:i,Out:p(i)}}}(),Qs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xs=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;return n.name="AmplitudeEnvelope",n._gainNode=new Fr({context:n.context,gain:0}),n.output=n._gainNode,n.input=n._gainNode,n._sig.connect(n._gainNode.gain),n.output=n._gainNode,n.input=n._gainNode,n}return Qs(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.dispose(),this},e}(Us),Ys=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zs=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n._scheduledEvents=[],n._synced=!1,n._original_triggerAttack=n.triggerAttack,n._original_triggerRelease=n.triggerRelease;var o=xo(e.getDefaults(),arguments);return n._volume=n.output=new Pi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,Rr(n,"volume"),n}return Ys(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{volume:0})},e.prototype.sync=function(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this},e.prototype._syncMethod=function(t,e){var n=this,o=this["_original_"+t]=this[t];this[t]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[e],s=n.context.transport.schedule(function(r){t[e]=r,o.apply(n,t)},i);n._scheduledEvents.push(s)}},e.prototype.unsync=function(){var t=this;return this._scheduledEvents.forEach(function(e){return t.context.transport.clear(e)}),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var r=this.toSeconds(n),i=this.toSeconds(e);return this.triggerAttack(t,r,o),this.triggerRelease(r+i),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this},e}(jr),Hs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$s=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this,o=xo(e.getDefaults(),arguments);return n.portamento=o.portamento,n.onsilence=o.onsilence,n}return Hs(e,t),e.getDefaults=function(){return Object.assign(Zs.getDefaults(),{detune:0,onsilence:Nr,portamento:0})},e.prototype.triggerAttack=function(t,e,n){void 0===n&&(n=1),this.log("triggerAttack",t,e,n);var o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,n),this.setNote(t,o),this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),o=t instanceof mr?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var r=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,r,n)}else this.frequency.setValueAtTime(o,n);return this},e}(Zs),Js=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ks=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},ta=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ks(arguments[e]));return t},ea=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="Synth";var o=xo(e.getDefaults(),arguments);return n.oscillator=new ws(Object.assign({context:n.context,detune:o.detune,onstop:function(){return n.onsilence(n)}},o.oscillator)),n.frequency=n.oscillator.frequency,n.detune=n.oscillator.detune,n.envelope=new Xs(Object.assign({context:n.context},o.envelope)),n.oscillator.chain(n.envelope,n.output),Rr(n,["oscillator","frequency","detune","envelope"]),n}return Js(e,t),e.getDefaults=function(){return Object.assign($s.getDefaults(),{envelope:Object.assign(Co(Us.getDefaults(),Object.keys(jr.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Co(ws.getDefaults(),ta(Object.keys(zi.getDefaults()),["frequency","detune"])),{type:"triangle"})})},e.prototype._triggerEnvelopeAttack=function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+o)}},e.prototype._triggerEnvelopeRelease=function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this},e}($s),na=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))||this;n.name="Sampler",n._activeSources=new Map;var o=xo(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),r={};return Object.keys(o.urls).forEach(function(t){var e=parseInt(t,10);if(n.assert(ao(t)||no(e)&&isFinite(e),"url key is neither a note or midi pitch: "+t),ao(t)){var i=new mr(n.context,t).toMidi();r[i]=o.urls[t]}else no(e)&&isFinite(e)&&(r[e]=o.urls[e])}),n._buffers=new Hr(r,o.onload,o.baseUrl),n.attack=o.attack,n.release=o.release,n.curve=o.curve,n._buffers.loaded&&Promise.resolve().then(o.onload),n}return na(e,t),e.getDefaults=function(){return Object.assign(Zs.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Nr,release:.1,urls:{}})},e.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: "+t)},e.prototype.triggerAttack=function(t,e,n){var o=this;return void 0===n&&(n=1),this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(function(t){var r=new mr(o.context,t).toMidi(),i=o._findClosest(r),s=r-i,a=o._buffers.get(s),u=ar(i),c=new Gi({buffer:a,context:o.context,curve:o.curve,fadeIn:o.attack,fadeOut:o.release,playbackRate:u}).connect(o.output);c.start(e,0,a.duration/u,n),io(o._activeSources.get(r))||o._activeSources.set(r,[]),o._activeSources.get(r).push(c),c.onended=function(){if(o._activeSources&&o._activeSources.has(r)){var t=o._activeSources.get(r),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}}),this},e.prototype.triggerRelease=function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(function(t){var o=new mr(n.context,t).toMidi();if(n._activeSources.has(o)&&n._activeSources.get(o).length){var r=n._activeSources.get(o);e=n.toSeconds(e),r.forEach(function(t){t.stop(e)}),n._activeSources.set(o,[])}}),this},e.prototype.releaseAll=function(t){var e=this.toSeconds(t);return this._activeSources.forEach(function(t){for(;t.length;){t.shift().stop(e)}}),this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var r=this;void 0===o&&(o=1);var i=this.toSeconds(n);return this.triggerAttack(t,i,o),io(e)?(this.assert(io(t),"notes must be an array when duration is array"),t.forEach(function(t,n){var o=e[Math.min(n,e.length-1)];r.triggerRelease(t,i+r.toSeconds(o))})):this.triggerRelease(t,i+this.toSeconds(e)),this},e.prototype.add=function(t,e,n){if(this.assert(ao(t)||isFinite(t),"note must be a pitch or midi: "+t),ao(t)){var o=new mr(this.context,t).toMidi();this._buffers.add(o,e,n)}else this._buffers.add(t,e,n);return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.dispose(),this._activeSources.forEach(function(t){t.forEach(function(t){return t.dispose()})}),this._activeSources.clear(),this},e}(Zs),ra=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ia=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["voice","options"]))||this;n.name="PolySynth",n._availableVoices=[],n._activeVoices=[],n._voices=[],n._gcTimeout=-1,n._averageActiveVoices=0;var o=xo(e.getDefaults(),arguments,["voice","options"]);n.assert(!no(o.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var r=o.voice.getDefaults();return n.options=Object.assign(r,o.options),n.voice=o.voice,n.maxPolyphony=o.maxPolyphony,n._gcTimeout=n.context.setInterval(n._collectGarbage.bind(n),1),n}return ra(e,t),e.getDefaults=function(){return Object.assign(Zs.getDefaults(),{maxPolyphony:32,options:{},voice:ea})},Object.defineProperty(e.prototype,"activeVoices",{get:function(){return this._activeVoices.length},enumerable:!0,configurable:!0}),e.prototype._getActiveVoice=function(t){var e=this._activeVoices.find(function(e){return e.midi===t});if(e)return e.voice},e.prototype._makeVoiceAvailable=function(t){this._availableVoices.push(t);var e=this._activeVoices.findIndex(function(e){return e.voice===t});this._activeVoices.splice(e,1)},e.prototype._getNextAvailableVoice=function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}Jn("Max polyphony exceeded. Note dropped.")},e.prototype._collectGarbage=function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>this._averageActiveVoices){var t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),t.dispose()}},e.prototype._triggerAttack=function(t,e,n){var o=this;t.forEach(function(t){var r=new bi(o.context,t).toMidi(),i=o._getActiveVoice(r);if(i&&i.getLevelAtTime(e)>0){var s=o._activeVoices.findIndex(function(t){return t.voice===i});o._activeVoices.splice(s,1)}else i=o._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),o._activeVoices.unshift({midi:r,voice:i}),o.log("triggerAttack",t,e))})},e.prototype._triggerRelease=function(t,e){var n=this;t.forEach(function(t){var o=new bi(n.context,t).toMidi(),r=n._getActiveVoice(o);r&&(r.triggerRelease(e),n.log("triggerRelease",t,e))})},e.prototype._scheduleEvent=function(t,e,n,o){var r=this;this.assert(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,o):this._triggerRelease(e,n):this.context.setTimeout(function(){r._scheduleEvent(t,e,n,o)},n-this.now())},e.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]);var o=this.toSeconds(e);return this._scheduleEvent("attack",t,o,n),this},e.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]);var n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var r=this.toSeconds(n);if(this.triggerAttack(t,r,o),io(e)){this.assert(io(t),"If the duration is an array, the notes must also be an array"),t=t;for(var i=0;i<t.length;i++){var s=e[Math.min(i,e.length-1)],a=this.toSeconds(s);this.assert(a>0,"The duration must be greater than 0"),this.triggerRelease(t[i],r+a)}}else{a=this.toSeconds(e);this.assert(a>0,"The duration must be greater than 0"),this.triggerRelease(t,r+a)}return this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.set=function(t){var e=this;return this.options=Oo(this.options,t),this._voices.forEach(function(t){return t.set(e.options)}),this},e.prototype.get=function(){return Object.assign({},this.options)},e.prototype.releaseAll=function(){var t=this.now();return this._activeVoices.forEach(function(e){e.voice.triggerRelease(t)}),this._activeVoices=[],this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._voices.forEach(function(t){return t.dispose()}),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this},e}(Zs),sa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),aa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="MembraneSynth",n.portamento=0;var o=xo(e.getDefaults(),arguments);return n.pitchDecay=o.pitchDecay,n.octaves=o.octaves,Rr(n,["oscillator","envelope"]),n}return sa(e,t),e.getDefaults=function(){return Oo($s.getDefaults(),ea.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),o=this.toFrequency(t instanceof mr?t.toFrequency():t),r=o*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(o,n+this.toSeconds(this.pitchDecay)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this},e}(ea),ua=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ca=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},la=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ca(arguments[e]));return t},pa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type","rolloff"]))||this;n.name="Filter",n.input=new Fr({context:n.context}),n.output=new Fr({context:n.context}),n._filters=[];var o=xo(e.getDefaults(),arguments,["frequency","type","rolloff"]);return n._filters=[],n.Q=new si({context:n.context,units:"positive",value:o.Q}),n.frequency=new si({context:n.context,units:"frequency",value:o.frequency}),n.detune=new si({context:n.context,units:"cents",value:o.detune}),n.gain=new si({context:n.context,units:"decibels",value:o.gain}),n._type=o.type,n.rolloff=o.rolloff,Rr(n,["detune","frequency","gain","Q"]),n}return ua(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this.assert(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: "+t),this._type=t,this._filters.forEach(function(e){return e.type=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var e=no(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],o=n.indexOf(e);this.assert(-1!==o,"rolloff can only be "+n.join(", ")),o+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(function(t){return t.disconnect()}),this._filters=new Array(o);for(var r=0;r<o;r++){var i=this.context.createBiquadFilter();i.type=this._type,this.frequency.connect(i.frequency),this.detune.connect(i.detune),this.Q.connect(i.Q),this.gain.connect(i.gain),this._filters[r]=i}this._internalChannels=this._filters,Mr.apply(void 0,la([this.input],this._internalChannels,[this.output]))},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){var e=this;void 0===t&&(t=128);for(var n=new Float32Array(t).map(function(){return 1}),o=new Float32Array(t),r=0;r<t;r++){var i=19980*Math.pow(r/t,2)+20;o[r]=i}var s=new Float32Array(t),a=new Float32Array(t);return this._filters.forEach(function(){var t=e.context.createBiquadFilter();t.type=e._type,t.Q.value=e.Q.value,t.frequency.value=e.frequency.value,t.gain.value=e.gain.value,t.getFrequencyResponse(o,s,a),s.forEach(function(t,e){n[e]*=t})}),n},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filters.forEach(function(t){t.disconnect()}),Vr(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this},e}(jr),ha=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fa=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["min","max"])))||this;n.name="Scale",n.input=new us({context:n.context,value:1}),n.output=new Ms({context:n.context,value:0});var o=xo(e.getDefaults(),arguments,["min","max"]);return n._outputMin=o.min,n._outputMax=o.max,n.input.connect(n.output),n._setRange(),n}return ha(e,t),e.getDefaults=function(){return Object.assign(ns.getDefaults(),{max:1,min:0})},Object.defineProperty(e.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()},enumerable:!0,configurable:!0}),e.prototype._setRange=function(){this.output.value=this._outputMin,this.input.value=this._outputMax-this._outputMin},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this},e}(ns),da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_a=[1,1.483,1.932,2.546,2.63,3.897],ya=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="MetalSynth",n._oscillators=[],n._freqMultipliers=[];var o=xo(e.getDefaults(),arguments);n.detune=new si({context:n.context,units:"cents",value:o.detune}),n.frequency=new si({context:n.context,units:"frequency"}),n._amplitude=new Fr({context:n.context,gain:0}).connect(n.output),n._highpass=new pa({Q:-3.0102999566398125,context:n.context,type:"highpass"}).connect(n._amplitude);for(var r=0;r<_a.length;r++){var i=new hs({context:n.context,harmonicity:o.harmonicity,modulationIndex:o.modulationIndex,modulationType:"square",onstop:0===r?function(){return n.onsilence(n)}:Nr,type:"square"});i.connect(n._highpass),n._oscillators[r]=i;var s=new us({context:n.context,value:_a[r]});n._freqMultipliers[r]=s,n.frequency.chain(s,i.frequency),n.detune.connect(i.detune)}return n._filterFreqScaler=new fa({context:n.context,max:7e3,min:n.toFrequency(o.resonance)}),n.envelope=new Us({attack:o.envelope.attack,attackCurve:"linear",context:n.context,decay:o.envelope.decay,release:o.envelope.release,sustain:0}),n.envelope.chain(n._filterFreqScaler,n._highpass.frequency),n.envelope.connect(n._amplitude.gain),n._octaves=o.octaves,n.octaves=o.octaves,n}return da(e,t),e.getDefaults=function(){return Oo($s.getDefaults(),{envelope:Object.assign(Co(Us.getDefaults(),Object.keys(jr.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})},e.prototype._triggerEnvelopeAttack=function(t,e){var n=this;return void 0===e&&(e=1),this.envelope.triggerAttack(t,e),this._oscillators.forEach(function(e){return e.start(t)}),0===this.envelope.sustain&&this._oscillators.forEach(function(e){e.stop(t+n.toSeconds(n.envelope.attack)+n.toSeconds(n.envelope.decay))}),this},e.prototype._triggerEnvelopeRelease=function(t){var e=this;return this.envelope.triggerRelease(t),this._oscillators.forEach(function(n){return n.stop(t+e.toSeconds(e.envelope.release))}),this},Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){this._oscillators.forEach(function(e){return e.modulationIndex.value=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){this._oscillators.forEach(function(e){return e.harmonicity.value=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._oscillators.forEach(function(t){return t.dispose()}),this._freqMultipliers.forEach(function(t){return t.dispose()}),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this},e}($s),ma=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),va=function(t){function e(e){var n=t.call(this,e)||this;n.name="ToneAudioWorklet",n.workletOptions={};var o=URL.createObjectURL(new Blob([n._audioWorklet()],{type:"text/javascript"})),r=n._audioWorkletName();return n.context.addAudioWorkletModule(o,r).then(function(){n.disposed||(n._worklet=n.context.createAudioWorkletNode(r,n.workletOptions),n._worklet.onprocessorerror=function(t){throw t.error},n.onReady(n._worklet))}),n}return ma(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._worklet&&this._worklet.disconnect(),this},e}(jr),ga=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ba=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["delayTime","resonance"]))||this;n.name="FeedbackCombFilter",n.workletOptions={numberOfInputs:1,numberOfOutputs:1};var o=xo(e.getDefaults(),arguments,["delayTime","resonance"]);n.input=new Fr({context:n.context}),n.output=new Fr({context:n.context});var r=n.context.createGain();return n.delayTime=new Sr({context:n.context,value:o.delayTime,units:"time",minValue:0,maxValue:1,param:r.gain,swappable:!0}),n.resonance=new Sr({context:n.context,value:o.resonance,units:"normalRange",param:r.gain,swappable:!0}),Rr(n,["resonance","delayTime"]),n}return ga(e,t),e.prototype._audioWorkletName=function(){return"feedback-comb-filter"},e.prototype._audioWorklet=function(){return' \n\t\t\tregisterProcessor("'+this._audioWorkletName()+'", class extends AudioWorkletProcessor {\n\t\t\t\tstatic get parameterDescriptors() {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tname: "delayTime",\n\t\t\t\t\t\tdefaultValue: 0.1,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: "feedback",\n\t\t\t\t\t\tdefaultValue: 0.5,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 0.9999,\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t\n\t\t\t\tconstructor(options) {\n\t\t\t\t\tsuper(options);\n\t\t\t\t\tthis.delayBuffer = new Float32Array(sampleRate);\n\t\t\t\t\tthis.currentFrame = 0\n\t\t\t\t}\n\t\t\t\n\t\t\t\tgetParameter(name, index, parameters) {\n\t\t\t\t\tif (parameters[name].length > 1) {\n\t\t\t\t\t\treturn parameters[name][index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn parameters[name][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t\tprocess(inputs, outputs, parameters) {\n\t\t\t\t\tconst input = inputs[0];\n\t\t\t\t\tconst output = outputs[0];\n\t\t\t\t\tthis.currentFrame += 128\n\t\t\t\t\tif (input && output) {\n\t\t\t\t\t\tconst delayLength = this.delayBuffer.length;\n\t\t\t\t\t\tinput.forEach((inputChannel, channelNum) => {\n\t\t\t\t\t\t\tinputChannel.forEach((value, index) => {\n\t\t\t\t\t\t\t\tconst delayTime = this.getParameter("delayTime", index, parameters);\n\t\t\t\t\t\t\t\tconst feedback = this.getParameter("feedback", index, parameters);\n\t\t\t\t\t\t\t\tconst delaySamples = Math.floor(delayTime * sampleRate);\n\t\t\t\t\t\t\t\tconst currentIndex = (this.currentFrame + index) % delayLength;\n\t\t\t\t\t\t\t\tconst delayedIndex = (this.currentFrame + index + delaySamples) % delayLength;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// the current value to output\n\t\t\t\t\t\t\t\tconst currentValue = this.delayBuffer[currentIndex];\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// write the current value to the delayBuffer in the future\n\t\t\t\t\t\t\t\tthis.delayBuffer[delayedIndex] = value + currentValue * feedback;\n\t\t\t\n\t\t\t\t\t\t\t\t// set all of the output channels to the same value\n\t\t\t\t\t\t\t\toutput[channelNum][index] = delaySamples > 0 ? currentValue : value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t'},e.getDefaults=function(){return Object.assign(jr.getDefaults(),{delayTime:.1,resonance:.5})},e.prototype.onReady=function(t){Mr(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var n=t.parameters.get("feedback");this.resonance.setParam(n)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this},e}(va),wa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OnePoleFilter";var o=xo(e.getDefaults(),arguments,["frequency","type"]);return n._frequency=o.frequency,n._type=o.type,n.input=new Fr({context:n.context}),n.output=new Fr({context:n.context}),n._createFilter(),n}return wa(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{frequency:.5,type:"lowpass"})},e.prototype._createFilter=function(){var t=this,e=this._filter,n=this.toFrequency(this._frequency),o=1/(2*Math.PI*n);if("lowpass"===this._type){var r=1/(o*this.context.sampleRate),i=r-1;this._filter=this.context.createIIRFilter([r,0],[1,i])}else{i=1/(o*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,i])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(function(){t.disposed||(t.input.disconnect(e),e.disconnect())},this.blockTime)},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._createFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._createFilter()},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){void 0===t&&(t=128);for(var e=new Float32Array(t),n=0;n<t;n++){var o=19980*Math.pow(n/t,2)+20;e[n]=o}var r=new Float32Array(t),i=new Float32Array(t);return this._filter.getFrequencyResponse(e,r,i),r},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this},e}(jr),xa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ta=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["delayTime","resonance","dampening"]))||this;n.name="LowpassCombFilter";var o=xo(e.getDefaults(),arguments,["delayTime","resonance","dampening"]);return n._combFilter=n.output=new ba({context:n.context,delayTime:o.delayTime,resonance:o.resonance}),n.delayTime=n._combFilter.delayTime,n.resonance=n._combFilter.resonance,n._lowpass=n.input=new Oa({context:n.context,frequency:o.dampening,type:"lowpass"}),n._lowpass.connect(n._combFilter),n}return xa(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lowpass.frequency},set:function(t){this._lowpass.frequency=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._combFilter.dispose(),this._lowpass.dispose(),this},e}(jr),Ca=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Aa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments))||this;n.name="PluckSynth";var o=xo(e.getDefaults(),arguments);return n._noise=new Xi({context:n.context,type:"pink"}),n.attackNoise=o.attackNoise,n._lfcf=new Ta({context:n.context,dampening:o.dampening,resonance:o.resonance}),n.resonance=o.resonance,n.release=o.release,n._noise.connect(n._lfcf),n._lfcf.connect(n.output),n}return Ca(e,t),e.getDefaults=function(){return Oo(Zs.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lfcf.dampening},set:function(t){this._lfcf.dampening=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){var n=this.toFrequency(t);e=this.toSeconds(e);var o=1/n;return this._lfcf.delayTime.setValueAtTime(o,e),this._noise.start(e),this._noise.stop(e+o*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this},e.prototype.triggerRelease=function(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this},e}(Zs),Sa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ka=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["callback","value"]))||this;n.name="ToneEvent",n._state=new ti("stopped"),n._startOffset=0;var o=xo(e.getDefaults(),arguments,["callback","value"]);return n._loop=o.loop,n.callback=o.callback,n.value=o.value,n._loopStart=n.toTicks(o.loopStart),n._loopEnd=n.toTicks(o.loopEnd),n._playbackRate=o.playbackRate,n._probability=o.probability,n._humanize=o.humanize,n.mute=o.mute,n.playbackRate=o.playbackRate,n}return Sa(e,t),e.getDefaults=function(){return Object.assign(Cr.getDefaults(),{callback:Nr,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})},e.prototype._rescheduleEvents=function(t){var e=this;void 0===t&&(t=-1),this._state.forEachFrom(t,function(t){var n;if("started"===t.state){-1!==t.id&&e.context.transport.clear(t.id);var o=t.time+Math.round(e.startOffset/e._playbackRate);if(!0===e._loop||no(e._loop)&&e._loop>1){n=1/0,no(e._loop)&&(n=e._loop*e._getLoopDuration());var r=e._state.getAfter(o);null!==r&&(n=Math.min(n,r.time-o)),n!==1/0&&(e._state.setStateAtTime("stopped",o+n+1,{id:-1}),n=new mi(e.context,n));var i=new mi(e.context,e._getLoopDuration());t.id=e.context.transport.scheduleRepeat(e._tick.bind(e),i,new mi(e.context,o),n)}else t.id=e.context.transport.schedule(e._tick.bind(e),new mi(e.context,o))}})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.context.transport.ticks)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this},e.prototype.stop=function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var n=this._state.getBefore(e),o=e;null!==n&&(o=n.time),this._rescheduleEvents(o)}return this},e.prototype.cancel=function(t){var e=this;t=To(t,-1/0);var n=this.toTicks(t);return this._state.forEachFrom(n,function(t){e.context.transport.clear(t.id)}),this._state.cancel(n),this},e.prototype._tick=function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;ro(this.humanize)||(n=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*n}this.callback(t,this.value)}},e.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new mi(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new mi(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.cancel(),this._state.dispose(),this},e}(Cr),Pa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ea=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["callback","events"]))||this;return n.name="Part",n._state=new ti("stopped"),n._events=new Set,xo(e.getDefaults(),arguments,["callback","events"]).events.forEach(function(t){io(t)?n.add(t[0],t[1]):n.add(t)}),n}return Pa(e,t),e.getDefaults=function(){return Object.assign(ka.getDefaults(),{events:[]})},e.prototype.start=function(t,e){var n=this,o=this.toTicks(t);if("started"!==this._state.getValueAtTime(o)){e=To(e,this._loop?this._loopStart:0),e=this._loop?To(e,this._loopStart):To(e,0);var r=this.toTicks(e);this._state.add({id:-1,offset:r,state:"started",time:o}),this._forEach(function(t){n._startNote(t,o,r)})}return this},e.prototype._startNote=function(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new mi(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new mi(this.context,e))):t.startOffset>=n&&t.start(new mi(this.context,e))},Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach(function(t){t.startOffset+=e._startOffset})},enumerable:!0,configurable:!0}),e.prototype.stop=function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(function(e){e.stop(t)}),this},e.prototype.at=function(t,e){for(var n=new Or(this.context,t).toTicks(),o=new mi(this.context,1).toSeconds(),r=this._events.values(),i=r.next();!i.done;){var s=i.value;if(Math.abs(n-s.startOffset)<o)return to(e)&&(s.value=e),s;i=r.next()}return to(e)?(this.add(t,e),this.at(t)):null},e.prototype.add=function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var n,o=this.toTicks(t);return e instanceof ka?(n=e).callback=this._tick.bind(this):n=new ka({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=o,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this},e.prototype._restartEvent=function(t){var e=this;this._state.forEach(function(n){"started"===n.state?e._startNote(t,n.time,n.offset):t.stop(new mi(e.context,n.time))})},e.prototype.remove=function(t,e){var n=this;return oo(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(function(o){o.startOffset===t&&(Kn(e)||to(e)&&o.value===e)&&(n._events.delete(o),o.dispose())}),this},e.prototype.clear=function(){return this._forEach(function(t){return t.dispose()}),this._events.clear(),this},e.prototype.cancel=function(t){return this._forEach(function(e){return e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},e.prototype._forEach=function(t){return this._events&&this._events.forEach(function(n){n instanceof e?n._forEach(t):t(n)}),this},e.prototype._setAll=function(t,e){this._forEach(function(n){n[t]=e})},e.prototype._tick=function(t,e){this.mute||this.callback(t,e)},e.prototype._testLoopBoundries=function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)},Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach(function(n){n.loopStart=e.loopStart,n.loopEnd=e.loopEnd,n.loop=t,e._testLoopBoundries(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new mi(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(n){n.loopEnd=t,e._testLoopBoundries(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new mi(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._events.size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.clear(),this},e}(ka),ja=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ma=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["callback","events","subdivision"]))||this;n.name="Sequence",n._part=new Ea({callback:n._seqCallback.bind(n),context:n.context}),n._events=[],n._eventsArray=[];var o=xo(e.getDefaults(),arguments,["callback","events","subdivision"]);return n._subdivision=n.toTicks(o.subdivision),n.events=o.events,n.loop=o.loop,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n.playbackRate=o.playbackRate,n.probability=o.probability,n.humanize=o.humanize,n.mute=o.mute,n.playbackRate=o.playbackRate,n}return ja(e,t),e.getDefaults=function(){return Object.assign(Co(ka.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})},e.prototype._seqCallback=function(t,e){null!==e&&this.callback(t,e)},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},set:function(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){return this._part.start(t,e?this._indexTime(e):e),this},e.prototype.stop=function(t){return this._part.stop(t),this},Object.defineProperty(e.prototype,"subdivision",{get:function(){return new mi(this.context,this._subdivision).toSeconds()},enumerable:!0,configurable:!0}),e.prototype._createSequence=function(t){var e=this;return new Proxy(t,{get:function(t,e){return t[e]},set:function(t,n,o){if(so(n)&&isFinite(parseInt(n,10))){parseInt(n,10);io(o)?t[n]=e._createSequence(o):t[n]=o}else t[n]=o;return e._eventsUpdated(),!0}})},e.prototype._eventsUpdated=function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd},e.prototype._rescheduleSequence=function(t,e,n){var o=this;t.forEach(function(t,r){var i=r*e+n;if(io(t))o._rescheduleSequence(t,e/t.length,i);else{var s=new mi(o.context,i,"i").toSeconds();o._part.add(s,t)}})},e.prototype._indexTime=function(t){return new mi(this.context,t*this._subdivision+this.startOffset).toSeconds()},e.prototype.clear=function(){return this._part.clear(),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._part.dispose(),this},Object.defineProperty(e.prototype,"loop",{get:function(){return this._part.loop},set:function(t){this._part&&(this._part.loop=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._part&&(this._part.loopStart=this._indexTime(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._part&&(this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._part.startOffset},set:function(t){this._part&&(this._part.startOffset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._part.playbackRate},set:function(t){this._part&&(this._part.playbackRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._part.probability},set:function(t){this._part&&(this._part.probability=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._part.humanize},set:function(t){this._part&&(this._part.humanize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._part.length},enumerable:!0,configurable:!0}),e}(ka),Da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ia=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["fade"])))||this;n.name="CrossFade",n._panner=n.context.createStereoPanner(),n._split=n.context.createChannelSplitter(2),n._g2a=new Vs({context:n.context}),n.a=new Fr({context:n.context,gain:0}),n.b=new Fr({context:n.context,gain:0}),n.output=new Fr({context:n.context}),n._internalChannels=[n.a,n.b];var o=xo(e.getDefaults(),arguments,["fade"]);return n.fade=new si({context:n.context,units:"normalRange",value:o.fade}),Rr(n,"fade"),n.context.getConstant(1).connect(n._panner),n._panner.connect(n._split),n._panner.channelCount=1,n._panner.channelCountMode="explicit",Dr(n._split,n.a.gain,0),Dr(n._split,n.b.gain,1),n.fade.chain(n._g2a,n._panner.pan),n.a.connect(n.output),n.b.connect(n.output),n}return Da(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{fade:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this},e}(jr),Ra=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Va=function(t){function e(e){var n=t.call(this,e)||this;return n.name="Effect",n._dryWet=new Ia({context:n.context}),n.wet=n._dryWet.fade,n.effectSend=new Fr({context:n.context}),n.effectReturn=new Fr({context:n.context}),n.input=new Fr({context:n.context}),n.output=n._dryWet,n.input.fan(n._dryWet.a,n.effectSend),n.effectReturn.connect(n._dryWet.b),n.wet.setValueAtTime(e.wet,0),n._internalChannels=[n.effectReturn,n.effectSend],Rr(n,"wet"),n}return Ra(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{wet:1})},e.prototype.connectEffect=function(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this},e}(jr),Na=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qa=function(t){function e(e){var n=t.call(this,e)||this;return n.name="FeedbackEffect",n._feedbackGain=new Fr({context:n.context,gain:e.feedback,units:"normalRange"}),n.feedback=n._feedbackGain.gain,Rr(n,"feedback"),n.effectReturn.chain(n._feedbackGain,n.effectSend),n}return Na(e,t),e.getDefaults=function(){return Object.assign(Va.getDefaults(),{feedback:.125})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this},e}(Va),Fa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),La=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["delayTime","feedback"]))||this;n.name="FeedbackDelay";var o=xo(e.getDefaults(),arguments,["delayTime","feedback"]);return n._delayNode=new Jr({context:n.context,delayTime:o.delayTime,maxDelay:o.maxDelay}),n.delayTime=n._delayNode.delayTime,n.connectEffect(n._delayNode),Rr(n,"delayTime"),n}return Fa(e,t),e.getDefaults=function(){return Object.assign(qa.getDefaults(),{delayTime:.25,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.dispose(),this.delayTime.dispose(),this},e}(qa),Ba=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wa=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},za=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ua=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Convolver",n._convolver=n.context.createConvolver();var o=xo(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new Ur(o.url,function(t){n.buffer=t,o.onload()}),n._buffer.loaded&&(n.buffer=n._buffer),n.normalize=o.normalize,n.connectEffect(n._convolver),n}return Ba(e,t),e.getDefaults=function(){return Object.assign(Va.getDefaults(),{normalize:!0,onload:Nr})},e.prototype.load=function(t){return Wa(this,void 0,void 0,function(){var e;return za(this,function(n){switch(n.label){case 0:return e=this,[4,this._buffer.load(t)];case 1:return e.buffer=n.sent(),[2]}})})},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.effectSend.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.connectEffect(this._convolver));var e=this._buffer.get();this._convolver.buffer=e||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer.dispose(),this._convolver.disconnect(),this},e}(Va),Ga=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qa=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["channels"]))||this;n.name="Merge";var o=xo(e.getDefaults(),arguments,["channels"]);return n._merger=n.output=n.input=n.context.createChannelMerger(o.channels),n}return Ga(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{channels:2})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merger.disconnect(),this},e}(jr),Xa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ya=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},Za=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ha=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["decay"]))||this;n.name="Reverb",n._convolver=n.context.createConvolver();var o=xo(e.getDefaults(),arguments,["decay"]);return n.decay=o.decay,n.preDelay=o.preDelay,n.connectEffect(n._convolver),n}return Xa(e,t),e.getDefaults=function(){return Object.assign(Va.getDefaults(),{decay:1.5,preDelay:.01})},e.prototype.generate=function(){return Ya(this,void 0,void 0,function(){var t,e=this;return Za(this,function(n){switch(n.label){case 0:return[4,Xr(function(t){var n=new Xi({context:t}),o=new Xi({context:t}),r=new Qa({context:t});n.connect(r,0,0),o.connect(r,0,1);var i=new Fr({context:t}).toDestination();r.connect(i),n.start(0),o.start(0),i.gain.setValueAtTime(0,0),i.gain.setValueAtTime(1,e.preDelay),i.gain.exponentialApproachValueAtTime(0,e.preDelay,e.decay)},this.decay+this.preDelay)];case 1:return t=n.sent(),this._convolver.buffer=t.get(),[2,this]}})})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._convolver.disconnect(),this},e}(Va),$a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ja=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["type","size"]))||this;n.name="Analyser",n._analyser=n.context.createAnalyser();var o=xo(e.getDefaults(),arguments,["type","size"]);return n.size=o.size,n.type=o.type,n.input=n.output=n._analyser,n}return $a(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{size:1024,smoothing:.8,type:"fft"})},e.prototype.getValue=function(){return"fft"===this._type?this._analyser.getFloatFrequencyData(this._buffer):"waveform"===this._type&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(e.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this.assert("waveform"===t||"fft"===t,"Analyser: invalid type: "+t),this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.disconnect(),this},e}(jr),Ka=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tu=function(t){function e(){var n=t.call(this,Object.assign(xo(e.getDefaults(),arguments,["pan"])))||this;n.name="Panner",n._panner=n.context.createStereoPanner(),n.input=n._panner,n.output=n._panner;var o=xo(e.getDefaults(),arguments,["pan"]);return n.pan=new Sr({context:n.context,param:n._panner.pan,value:o.pan}),n._panner.channelCount=1,n._panner.channelCountMode="explicit",Rr(n,"pan"),n}return Ka(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{pan:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.disconnect(),this.pan.dispose(),this},e}(jr),eu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nu=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["lowFrequency","highFrequency"]))||this;n.name="MultibandSplit",n.input=new Fr({context:n.context}),n.output=void 0,n.low=new pa({context:n.context,frequency:0,type:"lowpass"}),n._lowMidFilter=new pa({context:n.context,frequency:0,type:"highpass"}),n.mid=new pa({context:n.context,frequency:0,type:"lowpass"}),n.high=new pa({context:n.context,frequency:0,type:"highpass"}),n._internalChannels=[n.low,n.mid,n.high];var o=xo(e.getDefaults(),arguments,["lowFrequency","highFrequency"]);return n.lowFrequency=new si({context:n.context,units:"frequency",value:o.lowFrequency}),n.highFrequency=new si({context:n.context,units:"frequency",value:o.highFrequency}),n.Q=new si({context:n.context,units:"positive",value:o.Q}),n.input.fan(n.low,n.high),n.input.chain(n._lowMidFilter,n.mid),n.lowFrequency.fan(n.low.frequency,n._lowMidFilter.frequency),n.highFrequency.fan(n.mid.frequency,n.high.frequency),n.Q.connect(n.low.Q),n.Q.connect(n._lowMidFilter.Q),n.Q.connect(n.mid.Q),n.Q.connect(n.high.Q),Rr(n,["high","mid","low","highFrequency","lowFrequency"]),n}return eu(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),Vr(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this},e}(jr),ou=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ru=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["low","mid","high"]))||this;n.name="EQ3",n.output=new Fr({context:n.context}),n._internalChannels=[];var o=xo(e.getDefaults(),arguments,["low","mid","high"]);return n.input=n._multibandSplit=new nu({context:n.context,highFrequency:o.highFrequency,lowFrequency:o.lowFrequency}),n._lowGain=new Fr({context:n.context,gain:o.low,units:"decibels"}),n._midGain=new Fr({context:n.context,gain:o.mid,units:"decibels"}),n._highGain=new Fr({context:n.context,gain:o.high,units:"decibels"}),n.low=n._lowGain.gain,n.mid=n._midGain.gain,n.high=n._highGain.gain,n.Q=n._multibandSplit.Q,n.lowFrequency=n._multibandSplit.lowFrequency,n.highFrequency=n._multibandSplit.highFrequency,n._multibandSplit.low.chain(n._lowGain,n.output),n._multibandSplit.mid.chain(n._midGain,n.output),n._multibandSplit.high.chain(n._highGain,n.output),Rr(n,["low","mid","high","lowFrequency","highFrequency"]),n._internalChannels=[n._multibandSplit],n}return ou(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),Vr(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this},e}(jr),iu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),su=function(t){function e(){var n=t.call(this,xo(e.getDefaults(),arguments,["threshold","ratio"]))||this;n.name="Compressor",n._compressor=n.context.createDynamicsCompressor(),n.input=n._compressor,n.output=n._compressor;var o=xo(e.getDefaults(),arguments,["threshold","ratio"]);return n.threshold=new Sr({minValue:n._compressor.threshold.minValue,maxValue:n._compressor.threshold.maxValue,context:n.context,convert:!1,param:n._compressor.threshold,units:"decibels",value:o.threshold}),n.attack=new Sr({minValue:n._compressor.attack.minValue,maxValue:n._compressor.attack.maxValue,context:n.context,param:n._compressor.attack,units:"time",value:o.attack}),n.release=new Sr({minValue:n._compressor.release.minValue,maxValue:n._compressor.release.maxValue,context:n.context,param:n._compressor.release,units:"time",value:o.release}),n.knee=new Sr({minValue:n._compressor.knee.minValue,maxValue:n._compressor.knee.maxValue,context:n.context,convert:!1,param:n._compressor.knee,units:"decibels",value:o.knee}),n.ratio=new Sr({minValue:n._compressor.ratio.minValue,maxValue:n._compressor.ratio.maxValue,context:n.context,convert:!1,param:n._compressor.ratio,units:"number",value:o.ratio}),Rr(n,["knee","release","attack","ratio","threshold"]),n}return iu(e,t),e.getDefaults=function(){return Object.assign(jr.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})},Object.defineProperty(e.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this},e}(jr);function au(){return tr().now()}n.d(e,"now",function(){return au}),n.d(e,"Transport",function(){return uu}),n.d(e,"Destination",function(){return cu}),n.d(e,"getContext",function(){return tr}),n.d(e,"setContext",function(){return er}),n.d(e,"ToneAudioNode",function(){return jr}),n.d(e,"Param",function(){return Sr}),n.d(e,"Gain",function(){return Fr}),n.d(e,"Context",function(){return Xo}),n.d(e,"OfflineContext",function(){return $o}),n.d(e,"Offline",function(){return Xr}),n.d(e,"ToneAudioBuffer",function(){return Ur}),n.d(e,"ToneAudioBuffers",function(){return Hr}),n.d(e,"Delay",function(){return Jr}),n.d(e,"Clock",function(){return _i}),n.d(e,"Frequency",function(){return br}),n.d(e,"Time",function(){return _r}),n.d(e,"Ticks",function(){return vi}),n.d(e,"Midi",function(){return wi}),n.d(e,"TransportTime",function(){return xr}),n.d(e,"Draw",function(){return xi}),n.d(e,"StateTimeline",function(){return ti}),n.d(e,"IntervalTimeline",function(){return Ai}),n.d(e,"Timeline",function(){return Fo}),n.d(e,"Emitter",function(){return Do}),n.d(e,"Tone",function(){return Po}),n.d(e,"dbToGain",function(){return ir}),n.d(e,"gainToDb",function(){return sr}),n.d(e,"intervalToFrequencyRatio",function(){return ar}),n.d(e,"optionsFromArguments",function(){return xo}),n.d(e,"defaultArg",function(){return To}),n.d(e,"Unit",function(){return Bi}),n.d(e,"debug",function(){return o}),n.d(e,"Add",function(){return Ms}),n.d(e,"Abs",function(){return Is}),n.d(e,"AudioToGain",function(){return ss}),n.d(e,"GainToAudio",function(){return Vs}),n.d(e,"Multiply",function(){return us}),n.d(e,"Negate",function(){return qs}),n.d(e,"Signal",function(){return si}),n.d(e,"Subtract",function(){return Ls}),n.d(e,"WaveShaper",function(){return rs}),n.d(e,"Zero",function(){return Ws}),n.d(e,"Part",function(){return Ea}),n.d(e,"Sequence",function(){return Ma}),n.d(e,"ToneEvent",function(){return ka}),n.d(e,"FeedbackDelay",function(){return La}),n.d(e,"Convolver",function(){return Ua}),n.d(e,"Reverb",function(){return Ha}),n.d(e,"connect",function(){return Dr}),n.d(e,"disconnect",function(){return Ir}),n.d(e,"connectSeries",function(){return Mr}),n.d(e,"isUndef",function(){return Kn}),n.d(e,"isDefined",function(){return to}),n.d(e,"isFunction",function(){return eo}),n.d(e,"isNumber",function(){return no}),n.d(e,"isObject",function(){return oo}),n.d(e,"isBoolean",function(){return ro}),n.d(e,"isArray",function(){return io}),n.d(e,"isString",function(){return so}),n.d(e,"isNote",function(){return ao}),n.d(e,"Noise",function(){return Xi}),n.d(e,"Oscillator",function(){return ts}),n.d(e,"AMOscillator",function(){return ls}),n.d(e,"FMOscillator",function(){return hs}),n.d(e,"PulseOscillator",function(){return ds}),n.d(e,"FatOscillator",function(){return ys}),n.d(e,"PWMOscillator",function(){return vs}),n.d(e,"OmniOscillator",function(){return ws}),n.d(e,"ToneOscillatorNode",function(){return $i}),n.d(e,"ToneBufferSource",function(){return Gi}),n.d(e,"Player",function(){return Cs}),n.d(e,"Players",function(){return ks}),n.d(e,"GrainPlayer",function(){return Es}),n.d(e,"Synth",function(){return ea}),n.d(e,"Sampler",function(){return oa}),n.d(e,"PolySynth",function(){return ia}),n.d(e,"MembraneSynth",function(){return aa}),n.d(e,"MetalSynth",function(){return ya}),n.d(e,"PluckSynth",function(){return Aa}),n.d(e,"Analyser",function(){return Ja}),n.d(e,"CrossFade",function(){return Ia}),n.d(e,"Merge",function(){return Qa}),n.d(e,"Volume",function(){return Pi}),n.d(e,"Panner",function(){return tu}),n.d(e,"AmplitudeEnvelope",function(){return Xs}),n.d(e,"Envelope",function(){return Us}),n.d(e,"EQ3",function(){return ru}),n.d(e,"Filter",function(){return pa}),n.d(e,"Compressor",function(){return su}),n.d(e,"OnePoleFilter",function(){return Oa}),n.d(e,"FeedbackCombFilter",function(){return ba}),n.d(e,"LowpassCombFilter",function(){return Ta}),n.d(e,"start",function(){return nr});var uu=tr().transport,cu=tr().destination}])});
//# sourceMappingURL=Tone.js.map